<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Advisor | Africa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    <style>
        :root {
            --primary-color: #4338CA;
            --secondary-color: #16A34A;
            --light-gray: #F9FAFB;
            --medium-gray: #E5E7EB;
            --dark-gray: #4B5563;
            --text-color: #1F2937;
            --white: #FFFFFF;
            --border-radius: 0.75rem;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-gray);
            color: var(--text-color);
            margin: 0;
            padding: 2rem 1rem;
        }

        .main-container {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 1400px;
            margin: auto;
            overflow: hidden;
        }
        
        .page {
            padding: 1rem 2rem;
            display: none;
        }
        .page.active {
            display: block;
        }

        .header { text-align: center; margin-bottom: 1.5rem; }
        .header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .header p { font-size: 1rem; color: var(--dark-gray); max-width: 600px; margin: 0 auto; }

        .header-container {
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--medium-gray);
            padding-bottom: 1rem;
        }
        
        .header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
        }
        
        .page-title {
            flex: 1;
        }
        
        .inline-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
        }

        .kaleidofin-logo {
            display: inline-block;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 0.5rem;
            padding: 0.5rem;
        }
        .kaleidofin-logo:hover {
            background-color: rgba(67, 56, 202, 0.05);
            transform: scale(1.02);
        }
        .kaleidofin-logo svg {
            width: 164px;
            height: 30px;
        }

        .config-section { margin-bottom: 1.5rem; }
        .config-section h2 { font-size: 1.25rem; font-weight: 600; border-bottom: 1px solid var(--medium-gray); padding-bottom: 0.75rem; margin-bottom: 1.5rem; display: flex; align-items: center; }
        .config-section h2 .section-number { background-color: var(--primary-color); color: var(--white); border-radius: 50%; width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; font-size: 1rem; font-weight: 600; margin-right: 0.75rem; }
        
        .input-group { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
        .fieldset-group { border: 1px solid var(--medium-gray); border-radius: var(--border-radius); padding: 1.5rem; margin-top: 1.5rem; }
        .fieldset-group legend { font-weight: 600; padding: 0 0.5rem; color: var(--primary-color); }

        .custom-control { display: block; position: relative; cursor: pointer; font-size: 0.95rem; user-select: none; background-color: var(--light-gray); padding: 12px 12px 12px 40px; border-radius: 0.5rem; transition: all 0.2s; border: 1px solid var(--light-gray); }
        .custom-control:hover { border-color: var(--primary-color); }
        .custom-control input { position: absolute; opacity: 0; }
        .checkmark { position: absolute; top: 50%; left: 12px; transform: translateY(-50%); height: 20px; width: 20px; background-color: #fff; border: 1px solid var(--medium-gray); transition: all 0.2s; }
        .custom-control.radio .checkmark { border-radius: 50%; }
        .custom-control.checkbox .checkmark { border-radius: 4px; }
        .custom-control input:checked ~ .checkmark { background-color: var(--primary-color); border-color: var(--primary-color); }
        .checkmark:after { content: ""; position: absolute; display: none; }
        .custom-control input:checked ~ .checkmark:after { display: block; }
        .custom-control.checkbox .checkmark:after { left: 6px; top: 2px; width: 5px; height: 10px; border: solid white; border-width: 0 3px 3px 0; transform: rotate(45deg); }
        .custom-control.radio .checkmark:after { top: 6px; left: 6px; width: 8px; height: 8px; border-radius: 50%; background: white; }
        .custom-control.disabled { cursor: not-allowed; color: var(--dark-gray); background-color: #f9fafb; opacity: 0.7; }

        .waterfall-priority-list li { background-color: #F9FAFB; padding: 12px; margin-bottom: 8px; border-radius: 0.5rem; border: 1px solid var(--medium-gray); cursor: grab; display: flex; align-items: center; font-weight: 500;}
        .waterfall-priority-list li.dragging { opacity: 0.5; }
        .drag-handle { margin-right: 10px; color: var(--dark-gray); }

        .detail-item { cursor: pointer; text-decoration: underline; color: var(--primary-color); font-weight: 500;}
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background-color: #fff; padding: 30px; border: none; width: 90%; max-width: 650px; border-radius: var(--border-radius); position: relative; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateY(-30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .close-modal { color: #aaa; position: absolute; top: 15px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        .modal-content h3 { margin-top: 0; color: var(--primary-color); font-size: 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; }
        .modal-content h3 i { margin-right: 10px; }
        .modal-content .data-list { list-style: none; padding: 0; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .modal-content .data-list li { background-color: var(--light-gray); padding: 12px; border-radius: 0.5rem; display: flex; align-items: center; gap: 8px; justify-content: space-between; }
        .modal-content pre { background-color: var(--dark-gray); color: var(--light-gray); padding: 1rem; border-radius: 0.5rem; white-space: pre-wrap; font-size: 0.85rem; max-height: 400px; overflow-y: auto;}

        .button-group { display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; }
        .submit-button, .back-button, .start-over-button, .secondary-button { border: none; border-radius: 0.5rem; padding: 14px 28px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .submit-button { background-color: var(--secondary-color); color: var(--white); }
        .submit-button:hover { background-color: #15803d; }
        .back-button { background-color: var(--medium-gray); color: var(--dark-gray); }
        .back-button:hover { background-color: #D1D5DB; }
        .start-over-button { background-color: var(--primary-color); color: var(--white); }
        .start-over-button:hover { background-color: #3730a3; }
        .secondary-button { background-color: var(--secondary-color); color: var(--white); }
        .secondary-button:hover { background-color: #15803d; }

        .input-row { display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; align-items: center; margin-bottom: 1rem; }
        .input-row label, .score-bucket-row > span { font-weight: 500; }
        .input-row input, .input-row select, .mapping-row select { width: 100%; padding: 8px; border-radius: 0.5rem; border: 1px solid var(--medium-gray); }
        .input-row .select-wrapper { position: relative; }
        .input-row .select-wrapper::after { content: 'Hold Ctrl/Cmd to select multiple'; font-size: 0.75rem; color: var(--dark-gray); position: absolute; right: 5px; bottom: -18px; }
        select[multiple] { height: 150px; }

        .score-bucket-grid { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 1rem; align-items: center; margin-bottom: 0.5rem; font-weight: 600; color: var(--dark-gray); padding-bottom: 0.5rem; border-bottom: 1px solid var(--medium-gray);}
        .score-bucket-row { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 1rem; align-items: center; margin-bottom: 1rem; }
        .score-bucket-row input { width: 100%; padding: 8px; border-radius: 0.5rem; border: 1px solid var(--medium-gray); text-align: center; }
        #overall-approval-rate { font-size: 1.2rem; font-weight: 700; color: var(--primary-color); }

        .recommendation-card { background: var(--light-gray); border-radius: var(--border-radius); padding: 2rem; margin-bottom: 1.5rem; border-left: 5px solid var(--primary-color); }
        .recommendation-card h3 { margin-top: 0; }
        .performance-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1.5rem; text-align: center; margin-top: 2rem; }
        .performance-metric h4 { margin-bottom: 0.5rem; color: var(--dark-gray); }
        .perf-value { font-size: 1.75rem; font-weight: 700; }
        .perf-lift { color: var(--secondary-color); font-weight: 600; }
        .perf-lift i { vertical-align: middle; }
        
        .upload-area { border: 2px dashed var(--medium-gray); border-radius: var(--border-radius); padding: 2rem; text-align: center; background-color: var(--light-gray); }
        .upload-slot { background-color: var(--white); border: 1px solid var(--medium-gray); border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem; text-align: left; }
        .upload-slot label { font-weight: 600; display: block; margin-bottom: 0.5rem; }
        .upload-slot input[type="file"] { width: 100%; }
        .info-box { background-color: #eff6ff; color: #1e40af; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem; font-size: 0.9rem; }

        .results-filter { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--medium-gray); padding-bottom: 1rem;}
        .filter-tab { background: none; border: 1px solid var(--medium-gray); padding: 8px 16px; border-radius: 99px; cursor: pointer; font-weight: 500; }
        .filter-tab.active { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .results-table-container { max-height: 400px; overflow-y: auto; }
        .results-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .results-table th, .results-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--medium-gray); }
        .results-table th { background-color: var(--light-gray); font-weight: 600; }
        .status-badge { padding: 4px 10px; border-radius: 99px; font-weight: 600; font-size: 0.8rem; }
        .status-approved { background-color: #dcfce7; color: #166534; }
        .status-rejected { background-color: #fee2e2; color: #991b1b; }
        
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .comparison-table th, .comparison-table td { border: 1px solid var(--medium-gray); padding: 10px; text-align: center; }

        .mapping-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem 2rem; align-items: center; }
        .mapping-grid .grid-header { font-weight: 600; color: var(--dark-gray); padding-bottom: 0.5rem; border-bottom: 1px solid var(--medium-gray); }
        .mapping-grid label { font-weight: 500; }
        .mapping-grid select { font-size: 0.9rem; }

        /* Custom Model Building Pages Styles */
        .info-box { background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border: 1px solid #cbd5e1; border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .info-box h3 { color: var(--primary-color); margin-bottom: 0.5rem; font-size: 1.1rem; }
        .info-box p { color: var(--dark-gray); margin: 0; line-height: 1.6; }

        .feature-generation-status { background: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 0.5rem; padding: 1rem; margin: 1rem 0; }
        .feature-generation-status h4 { color: #0c4a6e; margin-bottom: 0.5rem; }
        .feature-generation-status .status-item { display: flex; align-items: center; margin: 0.5rem 0; }
        .feature-generation-status .status-icon { width: 20px; height: 20px; margin-right: 0.5rem; border-radius: 50%; }
        .feature-generation-status .status-icon.completed { background: #10b981; }
        .feature-generation-status .status-icon.processing { background: #f59e0b; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .feature-overview-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .feature-card { background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .feature-card h5 { color: var(--primary-color); margin-bottom: 0.5rem; font-size: 0.9rem; }
        .feature-card .feature-count { font-size: 1.2rem; font-weight: 600; color: var(--secondary-color); }
        .feature-card .feature-list { font-size: 0.8rem; color: var(--dark-gray); margin-top: 0.5rem; }
        .see-more-btn { background: var(--primary-color); color: white; border: none; border-radius: 0.25rem; padding: 0.5rem 1rem; font-size: 0.8rem; cursor: pointer; margin-top: 0.5rem; transition: background-color 0.2s; }
        .see-more-btn:hover { background: #3730a3; }

        .decision-tree-container { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .decision-tree-container h3 { color: var(--primary-color); margin-bottom: 1rem; }
        .tree-flow { display: flex; align-items: center; justify-content: center; gap: 1rem; flex-wrap: wrap; }
        .tree-node { background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 0.5rem; padding: 1rem; margin: 0.5rem; text-align: center; min-width: 200px; position: relative; }
        .rule-node { background: #dbeafe; border-color: #3b82f6; }
        .approve-node { background: #dcfce7; border-color: #10b981; }
        .node-content { display: flex; flex-direction: column; align-items: center; }
        .rule-condition { font-size: 1rem; font-weight: 600; color: var(--primary-color); margin-bottom: 0.5rem; }
        .node-rates { display: flex; flex-direction: column; gap: 0.25rem; }
        .approval-rate { font-size: 0.9rem; color: #059669; font-weight: 600; }
        .default-rate { font-size: 0.9rem; color: #dc2626; font-weight: 600; }
        .tree-arrow { display: flex; align-items: center; justify-content: center; color: var(--primary-color); font-size: 1.5rem; }
        .tree-arrow i { width: 24px; height: 24px; }

        /* Cutoff Adjustment Styles */
        .cutoff-adjustment {
            background: #f8fafc;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .cutoff-controls {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .cutoff-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
        }

        .cutoff-item label {
            min-width: 200px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .cutoff-slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
        }

        .cutoff-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }

        .cutoff-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: none;
        }

        .cutoff-value {
            min-width: 80px;
            font-weight: 700;
            color: var(--secondary-color);
            text-align: center;
        }

        .training-progress { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; }
        .training-progress h3 { color: var(--primary-color); margin-bottom: 1rem; }
        .progress-bar { width: 100%; height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden; margin: 0.5rem 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #10b981, #059669); transition: width 0.3s ease; }
        .training-steps { margin: 1rem 0; }
        .training-step { display: flex; align-items: center; margin: 0.5rem 0; padding: 0.5rem; border-radius: 0.25rem; }
        .training-step.completed { background: #f0fdf4; }
        .training-step.current { background: #fef3c7; }
        .training-step.pending { background: #f8fafc; }

        .model-comparison { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; }
        .model-comparison h3 { color: var(--primary-color); margin-bottom: 1rem; }
        .comparison-table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        .comparison-table th, .comparison-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #e2e8f0; }
        .comparison-table th { background: #f8fafc; font-weight: 600; color: var(--dark-gray); }
        .comparison-table .metric-name { font-weight: 500; color: var(--primary-color); }
        .comparison-table .metric-value { font-weight: 600; }
        .comparison-table .improvement { color: #10b981; font-weight: 600; }

        .metric-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .metric-card { background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .metric-card .metric-value { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); margin-bottom: 0.25rem; }
        .metric-card .metric-label { font-size: 0.8rem; color: var(--dark-gray); text-transform: uppercase; letter-spacing: 0.5px; }

        .improvement { display: inline-flex; align-items: center; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; font-weight: 600; }
        .improvement.positive { background: #dcfce7; color: #166534; }
        .improvement.negative { background: #fee2e2; color: #991b1b; }

        .target-selection-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0; }
        .target-option { background: white; border: 2px solid #e2e8f0; border-radius: 0.5rem; padding: 1.5rem; text-align: center; cursor: pointer; transition: all 0.2s; }
        .target-option:hover { border-color: var(--primary-color); transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .target-option.selected { border-color: var(--primary-color); background: #f0f9ff; }
        .target-option h4 { color: var(--primary-color); margin-bottom: 0.5rem; }
        .target-option p { color: var(--dark-gray); font-size: 0.9rem; margin: 0; }

        /* AutoML Process Styles */
        .automl-process { display: flex; flex-direction: column; gap: 1rem; margin: 1rem 0; }
        .process-step { background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1rem; }
        .process-step h4 { color: var(--primary-color); margin-bottom: 0.5rem; font-size: 0.9rem; }
        .process-status { display: flex; align-items: center; gap: 0.5rem; color: var(--dark-gray); font-size: 0.85rem; }
        .final-model-selection { background: white; border: 2px solid var(--secondary-color); border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; }
        .selected-model h4 { color: var(--secondary-color); margin-bottom: 1rem; font-size: 1.1rem; }
        .model-details { margin-bottom: 1rem; }
        .model-details p { margin: 0.25rem 0; font-size: 0.9rem; color: var(--dark-gray); }

        /* Model Comparison Styles */
        .model-comparison-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin: 1rem 0; }
        .model-card { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .model-card h4 { color: var(--primary-color); margin-bottom: 1rem; font-size: 1.1rem; }
        .feature-importance { margin-top: 1.5rem; }
        .feature-importance h5 { color: var(--dark-gray); margin-bottom: 0.75rem; font-size: 0.9rem; }
        .feature-weight { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; font-size: 0.85rem; }
        .feature-weight span:first-child { min-width: 150px; }
        .weight-bar { height: 8px; background: var(--secondary-color); border-radius: 4px; transition: width 0.3s ease; }
        .selected-model-details { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin: 1rem 0; }
        .model-summary { background: white; border: 2px solid var(--secondary-color); border-radius: 0.75rem; padding: 1.5rem; }
        .model-summary h4 { color: var(--secondary-color); margin-bottom: 1rem; }
        .feature-breakdown { background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1.5rem; }
        .feature-breakdown h5 { margin-bottom: 1rem; color: var(--dark-gray); }
        .feature-category-breakdown { display: flex; flex-direction: column; gap: 0.5rem; }
        .category-item { display: flex; justify-content: space-between; padding: 0.5rem; background: #f8fafc; border-radius: 0.25rem; font-size: 0.9rem; }

        /* Rules Configuration Styles */
        .variable-selection { margin: 1rem 0; }
        .variable-group { margin-bottom: 2rem; }
        .variable-group h4 { color: var(--primary-color); margin-bottom: 1rem; }
        .selected-variable { display: flex; align-items: center; gap: 1rem; padding: 1rem; background: #f0f9ff; border: 1px solid var(--primary-color); border-radius: 0.5rem; }
        .selected-variable span { font-weight: 600; color: var(--primary-color); }
        .selected-variable input { width: 100px; padding: 0.25rem; border: 1px solid #d1d5db; border-radius: 0.25rem; }
        .threshold-input { width: 100px; margin-left: auto; padding: 0.25rem; border: 1px solid #d1d5db; border-radius: 0.25rem; }
        .tree-placeholder { text-align: center; padding: 3rem; color: var(--dark-gray); font-style: italic; }
        .node-rates { font-size: 0.8rem; color: var(--dark-gray); margin-top: 0.25rem; }

        /* Final Model Summary Styles */
        .model-summary-card { background: white; border: 2px solid var(--secondary-color); border-radius: 0.75rem; padding: 1.5rem; margin: 1rem 0; }
        .summary-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .summary-header h3 { color: var(--primary-color); margin: 0; }
        .model-badge { background: var(--secondary-color); color: white; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.8rem; font-weight: 600; }
        .summary-details { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .summary-item { display: flex; justify-content: space-between; padding: 0.75rem; background: #f8fafc; border-radius: 0.5rem; }
        .summary-item .label { font-weight: 600; color: var(--dark-gray); }
        .summary-item .value { color: var(--primary-color); font-weight: 600; }
        .impact-metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin: 1rem 0; }
        .impact-card { background: white; border: 1px solid #e2e8f0; border-radius: 0.75rem; padding: 1.5rem; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .impact-icon { font-size: 2rem; margin-bottom: 1rem; }
        .impact-content h4 { color: var(--primary-color); margin-bottom: 0.5rem; }
        .impact-value { font-size: 1.5rem; font-weight: 700; color: var(--secondary-color); margin-bottom: 0.25rem; }
        .impact-change { font-size: 0.9rem; font-weight: 600; }
        .impact-change.positive { color: #16a34a; }
        .strategy-overview { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0; }
        .strategy-summary { background: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 1.5rem; }
        .strategy-summary h4 { color: var(--primary-color); margin-bottom: 1rem; }
        .strategy-details { display: flex; flex-direction: column; gap: 0.75rem; }
        .strategy-item { display: flex; justify-content: space-between; padding: 0.5rem; background: #f8fafc; border-radius: 0.25rem; font-size: 0.9rem; }
        .deployment-status { background: white; border: 2px solid var(--secondary-color); border-radius: 0.5rem; padding: 1.5rem; }
        .deployment-status h4 { color: var(--secondary-color); margin-bottom: 0.5rem; }
        .deployment-actions { display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap; }
        .deployment-actions button { flex: 1; min-width: 140px; }

        /* Info Icon Styles */
        .info-icon { cursor: pointer; color: var(--secondary-color); margin-left: 0.5rem; }
        .model-details-summary { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e2e8f0; }
        .model-details-summary p { margin: 0.25rem 0; font-size: 0.85rem; color: var(--dark-gray); }

    </style>
</head>
<body>

    <div class="main-container">
        <!-- PAGE 1: DATA SELECTION -->
        <div id="data-selection-page" class="page active">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Model Advisor</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Select your asset class and available data sources to configure the optimal predictive model for your portfolio.</p>
                    </div>
                </div>
            </div>
            <form id="model-config-form">
                <section class="config-section">
                    <h2><span class="section-number">1</span>Select Asset Class (Mandatory)</h2>
                    <div class="input-group">
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="MFI" checked> MFI<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="MSME_S"> MSME (Secured)<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="MSME_U"> MSME (Unsecured)<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="Agri"> Agri Loans<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="Housing"> Affordable Housing<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="asset_class" value="2W"> Two Wheeler<span class="checkmark"></span></label>
                    </div>
                </section>

                <section class="config-section">
                    <h2><span class="section-number">2</span>Configure Bureau Data (Mandatory)</h2>
                    <fieldset class="fieldset-group"><legend>Setup Type</legend><div class="input-group">
                        <label class="custom-control radio"><input type="radio" name="bureau_setup" value="single" checked> Single Bureau<span class="checkmark"></span></label>
                        <label class="custom-control radio"><input type="radio" name="bureau_setup" value="multi"> Multi-Bureau<span class="checkmark"></span></label>
                    </div></fieldset>
                    <div id="bureau-options-container">
                        <div id="single-bureau-options">
                            <fieldset class="fieldset-group"><legend>Select Bureau Report</legend><div class="input-group" style="grid-template-columns: 1fr 1fr;">
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="CIBIL Standard" checked> CIBIL Standard Credit Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="Equifax Standard"> Equifax Standard Credit Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="Equifax Micro"> Equifax Micro-Credit Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="Equifax Household"> Equifax Household Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="CRIF Standard"> CRIF High Mark Standard Credit Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="CRIF Micro"> CRIF High Mark Micro-Credit Report<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="bureau_report_single" value="CRIF Household"> CRIF High Mark Household Report<span class="checkmark"></span></label>
                            </div></fieldset>
                        </div>
                        <div id="multi-bureau-options" style="display: none;">
                            <fieldset class="fieldset-group"><legend>Multi-Bureau Strategy</legend><div class="input-group">
                                <label class="custom-control radio"><input type="radio" name="multi_bureau_strategy" value="waterfall" checked> Waterfall<span class="checkmark"></span></label>
                                <label class="custom-control radio"><input type="radio" name="multi_bureau_strategy" value="merge"> Bureau-Merge<span class="checkmark"></span></label>
                            </div></fieldset>
                            <div id="multi-bureau-selection-container">
                                <fieldset class="fieldset-group"><legend>Select Bureau Reports</legend>
                                    <div class="input-group" style="grid-template-columns: 1fr 1fr;" id="multi-bureau-checkboxes">
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="CIBIL Standard"> CIBIL Standard Credit Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="Equifax Standard"> Equifax Standard Credit Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="Equifax Micro"> Equifax Micro-Credit Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="Equifax Household"> Equifax Household Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="CRIF Standard"> CRIF High Mark Standard Credit Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="CRIF Micro"> CRIF High Mark Micro-Credit Report<span class="checkmark"></span></label>
                                        <label class="custom-control checkbox"><input type="checkbox" name="bureau_report_multi" value="CRIF Household"> CRIF High Mark Household Report<span class="checkmark"></span></label>
                                    </div>
                                </fieldset>
                            </div>
                            <div id="waterfall-priority-container">
                                <fieldset class="fieldset-group"><legend>Set Priority (Drag to Reorder)</legend>
                                    <ul class="waterfall-priority-list" id="waterfall-list"></ul>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="config-section">
                    <h2><span class="section-number">3</span>Application Data</h2>
                    <fieldset class="fieldset-group"><legend>Basic Details (Mandatory)</legend><div class="input-group">
                        <div class="custom-control disabled"><span class="detail-item" data-modal-target="loan-data-modal">Loan Data</span><input type="checkbox" checked disabled><span class="checkmark"></span></div>
                        <div class="custom-control disabled"><span class="detail-item" data-modal-target="customer-data-modal">Customer Data</span><input type="checkbox" checked disabled><span class="checkmark"></span></div>
                    </div></fieldset>
                    <fieldset class="fieldset-group"><legend>Good to Have (Optional)</legend><div class="input-group">
                        <label class="custom-control checkbox"><span class="detail-item" data-modal-target="on-us-repayment-modal">Historical On-Us Repayments</span><input type="checkbox" data-source-name="On-Us Repayments"><span class="checkmark"></span></label>
                        <label class="custom-control checkbox"><span class="detail-item" data-modal-target="asset-ownership-modal">Customer Asset Ownership</span><input type="checkbox" data-source-name="Asset Ownership"><span class="checkmark"></span></label>
                    </div></fieldset>
                    <div id="asset-specific-data-section" style="display:none;">
                        <fieldset class="fieldset-group"><legend>Asset Class Specific (Optional)</legend><div class="input-group">
                            <label class="custom-control checkbox" data-asset-class="MSME_S MSME_U"><span class="detail-item" data-modal-target="business-details-modal">Business Details</span><input type="checkbox" data-source-name="Business Details"><span class="checkmark"></span></label>
                            <label class="custom-control checkbox" data-asset-class="Agri"><span class="detail-item" data-modal-target="land-details-modal">Landholding Details</span><input type="checkbox" data-source-name="Landholding Details"><span class="checkmark"></span></label>
                            <label class="custom-control checkbox" data-asset-class="Agri"><span class="detail-item" data-modal-target="crop-details-modal">Crop Details</span><input type="checkbox" data-source-name="Crop Details"><span class="checkmark"></span></label>
                            <label class="custom-control checkbox" data-asset-class="MSME_S Housing"><span class="detail-item" data-modal-target="collateral-details-modal">Collateral Details</span><input type="checkbox" data-source-name="Collateral Details"><span class="checkmark"></span></label>
                            <label class="custom-control checkbox" data-asset-class="2W"><span class="detail-item" data-modal-target="vehicle-details-modal">Vehicle Details</span><input type="checkbox" data-source-name="Vehicle Details"><span class="checkmark"></span></label>
                        </div></fieldset>
                    </div>
                </section>

                <section class="config-section"><h2><span class="section-number">4</span>Bank Statement Data</h2><fieldset class="fieldset-group"><legend>Include Bank Statement (Optional)</legend>
                    <label class="custom-control checkbox">Yes, include bank statement data in the model<input type="checkbox" id="include-bank-statement" data-source-name="Bank Statements"><span class="checkmark"></span></label>
                    <div id="bank-format-options" style="margin-top: 1rem; display: none;">
                        <div class="input-group" style="margin-bottom: 1.5rem;">
                            <label class="custom-control radio"><span class="detail-item" data-modal-target="txn-data-modal">Transaction Level Data</span><input type="radio" name="bank_statement" id="txn-data-radio" disabled><span class="checkmark"></span></label>
                            <label class="custom-control radio"><span class="detail-item" data-modal-target="summ-data-modal">Summarised Account Level Data</span><input type="radio" name="bank_statement" id="summ-data-radio" disabled><span class="checkmark"></span></label>
                        </div>
                        <div id="account-aggregator-section" style="margin-top: 1.5rem; display: none;">
                            <h4 style="font-weight: 600; margin-bottom: 1rem; color: var(--primary-color);">Select Account Aggregator</h4>
                            <div class="input-group">
                                <label class="custom-control radio">CRIF Connect<input type="radio" name="account_aggregator" value="crif"><span class="checkmark"></span></label>
                                <label class="custom-control radio">CAMSfinserv<input type="radio" name="account_aggregator" value="cams"><span class="checkmark"></span></label>
                                <label class="custom-control radio">Perfios Account Aggregation Services (Anumati)<input type="radio" name="account_aggregator" value="perfios"><span class="checkmark"></span></label>
                                <label class="custom-control radio">Finvu (Cookiejar Technologies)<input type="radio" name="account_aggregator" value="finvu"><span class="checkmark"></span></label>
                                <label class="custom-control radio">OneMoney (FinSec AA Solutions)<input type="radio" name="account_aggregator" value="onemoney"><span class="checkmark"></span></label>
                                <label class="custom-control radio">Setu (Agya Technologies)<input type="radio" name="account_aggregator" value="setu"><span class="checkmark"></span></label>
                                <label class="custom-control radio">NESL Asset Data Limited (NADL)<input type="radio" name="account_aggregator" value="nadl"><span class="checkmark"></span></label>
                            </div>
                        </div>
                    </div>
                </fieldset></section>
                
                <section class="config-section"><h2><span class="section-number">5</span>Proprietary Alternate Data (Optional)</h2><div class="input-group">
                    <label class="custom-control checkbox"><span class="detail-item" data-modal-target="socio-data-modal">Socioeconomic Infrastructure</span><input type="checkbox"><span class="checkmark"></span></label>
                    <label class="custom-control checkbox"><span class="detail-item" data-modal-target="climate-risk-modal">Climate Risk Factor</span><input type="checkbox"><span class="checkmark"></span></label>
                    <label class="custom-control checkbox"><span class="detail-item" data-modal-target="digital-footprint-modal">Digital Footprint</span><input type="checkbox"><span class="checkmark"></span></label>
                    <label class="custom-control checkbox"><span class="detail-item" data-modal-target="income-estimates-modal">Income estimates</span><input type="checkbox"><span class="checkmark"></span></label>
                </div></section>
                <div class="button-group"><div></div><button type="button" class="submit-button" id="proceed-btn">Proceed to Institution Profile Set up</button></div>
            </form>
        </div>
        
        <div id="institution-profile-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Institution Profile & Risk Appetite</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Define your portfolio characteristics to finalize the model recommendation.</p>
                    </div>
                </div>
            </div>
            <form>
                <section class="config-section"><h2><span class="section-number">1</span>Operational Details</h2>
                    <div class="input-row"><label for="geo">Geographies (States & UTs)</label><div class="select-wrapper"><select id="geo" multiple></select></div></div>
                    <div class="input-row"><label for="ticket-size">Typical Loan Ticket Size ()</label><input type="number" id="ticket-size" placeholder="e.g., 50000"></div>
                    <div class="input-row"><label for="tenure">Typical Tenure (Months)</label><input type="number" id="tenure" placeholder="e.g., 24"></div>
                </section>
                <section class="config-section"><h2><span class="section-number">2</span>Financial & Risk Profile</h2>
                    <div class="input-row"><label for="interest">Typical Interest Rate (%)</label><input type="number" id="interest" placeholder="e.g., 18.5" step="0.1"></div>
                    <div class="input-row"><label for="loss-rate">Current Overall Loss Rate (%)</label><input type="number" id="loss-rate" placeholder="e.g., 2.5" step="0.1"></div>
                </section>
                <section class="config-section"><h2><span class="section-number">3</span>Bureau Score Profile</h2>
                    <div class="score-bucket-grid"><span>Score Bucket</span><span>Population (%)</span><span>Approval Rate (%)</span></div>
                    <div class="score-bucket-row"><span>&lt; 680</span><input type="number" class="score-input" data-bucket="pop" value="20"><input type="number" class="score-input" data-bucket="app" value="10"></div>
                    <div class="score-bucket-row"><span>680 - 730</span><input type="number" class="score-input" data-bucket="pop" value="30"><input type="number" class="score-input" data-bucket="app" value="35"></div>
                    <div class="score-bucket-row"><span>730 - 770</span><input type="number" class="score-input" data-bucket="pop" value="30"><input type="number" class="score-input" data-bucket="app" value="60"></div>
                    <div class="score-bucket-row"><span>770 - 790</span><input type="number" class="score-input" data-bucket="pop" value="15"><input type="number" class="score-input" data-bucket="app" value="80"></div>
                    <div class="score-bucket-row"><span>&gt; 790</span><input type="number" class="score-input" data-bucket="pop" value="5"><input type="number" class="score-input" data-bucket="app" value="90"></div>
                    <div style="text-align: right; margin-top: 1rem;"><strong>Overall Approval Rate: <span id="overall-approval-rate">45.0%</span></strong></div>
                </section>
                <div class="button-group"><button type="button" class="back-button" id="back-btn-1">Back to Data Selection</button><button type="button" class="submit-button" id="recommend-btn">Get Model Recommendation</button></div>
            </form>
        </div>

        <div id="recommendation-page" class="page">
             <div class="header-container">
                 <div class="header-row">
                     <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                         <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                             <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                             <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                             <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                             <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                             <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                         </svg>
                     </a>
                     <div class="page-title">
                         <h1 class="inline-title">Your Custom Model Recommendation</h1>
                         <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Based on your selections, here is the optimal model and its estimated performance.</p>
                     </div>
                 </div>
             </div>
             <div class="recommendation-card">
                 <h3 id="rec-model-name"></h3>
                 <p id="rec-model-desc"></p>
             </div>
             <section class="config-section"><h2>Performance Lift Estimation</h2><div class="performance-grid">
                 <div class="performance-metric"><h4>Approval Rate</h4><p class="perf-value" id="current-approval-rate"></p></div>
                 <div class="performance-metric"><h4>Estimated Approval Rate</h4><p class="perf-value" id="new-approval-rate"></p><p class="perf-lift"><i data-lucide="arrow-up"></i> <span id="approval-lift"></span></p></div>
                 <div class="performance-metric"><h4>Estimated Loss Rate</h4><p class="perf-value" id="new-loss-rate"></p><p class="perf-lift" style="color: #dc2626;"><i data-lucide="arrow-down"></i> <span id="loss-reduction"></span></p></div>
             </div></section>
             <section class="config-section"><h2>Other Potential Models</h2>
                <p>You can also consider these alternative models for different risk strategies.</p>
                <div class="input-group">
                    <div class="custom-control"><strong>KI-Score: Aggressive Growth</strong></div>
                    <div class="custom-control"><strong>KI-Score: Conservative Risk</strong></div>
                </div>
             </section>
             <div class="button-group"><button type="button" class="back-button" id="back-btn-2">Back to Profile Setup</button><button type="button" class="submit-button" id="backtest-btn">Backtest with Data</button></div>
        </div>
        
        <div id="backtest-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Bulk Scoring & Backtesting</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Upload your portfolio data to backtest the recommended model.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Upload Portfolio Data File</h2>
                <div class="upload-area">
                    <p>Please upload a single CSV file. <span class="detail-item" data-modal-target="csv-format-modal">View required format.</span></p>
                    <div class="upload-slot">
                        <label for="backtest-file">Portfolio CSV File</label>
                        <input type="file" id="backtest-file" accept=".csv">
                    </div>
                </div>
            </section>
             <div class="button-group">
                <button type="button" class="back-button" id="back-btn-3">Back to Recommendation</button>
                <button type="button" class="submit-button" id="run-backtest-btn">Proceed to Data Mapping</button>
             </div>
        </div>
        
        <div id="mapping-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Data Mapping</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Map your CSV columns to our required model fields using the dropdowns.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <div id="mapping-grid" class="mapping-grid">
                    <div class="grid-header">Required Model Field</div>
                    <div class="grid-header">Your CSV Column</div>
                    <!-- JS will populate this -->
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-btn-mapping">Back to Upload</button>
                <button type="button" class="submit-button" id="validate-and-run-btn">Validate & Run Backtest</button>
            </div>
        </div>


        <div id="backtest-results-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="200" height="52" viewBox="0 0 264 69" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 28.6165L29.6939 14.0607V25.7053L0 40.2611V28.6165Z" fill="#0F547E"/>
                            <path d="M0 40.5523L29.6939 55.1081V43.4634L0 28.9076V40.5523Z" fill="#28B2B6"/>
                            <path d="M67.9042 27.1169L57.14 38.4274L68.1228 54H59.2164L52.1131 43.7276L49.1079 46.8967V54H41.8407V14.4402H49.1079V37.1161L58.3967 27.1169H67.9042ZM66.8046 46.6782C66.8046 44.3833 67.5513 42.5437 69.0448 41.1595C70.5383 39.7752 72.469 38.901 74.8367 38.5367L81.4482 37.5532C82.796 37.3711 83.4699 36.7336 83.4699 35.6408C83.4699 34.6208 83.0692 33.783 82.2678 33.1273C81.5029 32.4716 80.3918 32.1438 78.9348 32.1438C77.4048 32.1438 76.1845 32.5627 75.2738 33.4005C74.3996 34.2383 73.9078 35.2765 73.7985 36.515L67.351 35.149C67.6059 32.8177 68.7534 30.7596 70.7933 28.9746C72.8332 27.1897 75.5288 26.2972 78.8801 26.2972C82.8871 26.2972 85.8377 27.2626 87.7319 29.1932C89.6261 31.0874 90.5732 33.528 90.5732 36.515V49.738C90.5732 51.3408 90.6825 52.7615 90.901 54H84.2349C84.0528 53.1986 83.9617 52.124 83.9617 50.7762C82.2496 53.4354 79.6087 54.765 76.0388 54.765C73.2704 54.765 71.0301 53.9636 69.318 52.3608C67.6424 50.758 66.8046 48.8638 66.8046 46.6782ZM77.5687 49.3556C79.2808 49.3556 80.6833 48.882 81.7761 47.9349C82.9053 46.9514 83.4699 45.3486 83.4699 43.1265V41.9244L77.4048 42.8533C75.1828 43.1812 74.0717 44.3104 74.0717 46.241C74.0717 47.1153 74.3814 47.862 75.0006 48.4813C75.6199 49.0641 76.4759 49.3556 77.5687 49.3556ZM101.887 54H94.62V14.4402H101.887V54ZM111.689 37.4986H123.71C123.637 36.005 123.091 34.7483 122.071 33.7284C121.087 32.7084 119.63 32.1984 117.7 32.1984C115.951 32.1984 114.531 32.7448 113.438 33.8376C112.345 34.9305 111.762 36.1508 111.689 37.4986ZM124.42 44.4925L130.486 46.2957C129.757 48.7727 128.318 50.8126 126.169 52.4154C124.056 54.0182 121.415 54.8196 118.246 54.8196C114.385 54.8196 111.106 53.5264 108.411 50.9401C105.715 48.3174 104.367 44.8204 104.367 40.4491C104.367 36.2965 105.679 32.9088 108.301 30.286C110.924 27.6268 114.021 26.2972 117.59 26.2972C121.743 26.2972 124.985 27.5358 127.316 30.0128C129.684 32.4898 130.868 35.8958 130.868 40.2306C130.868 40.522 130.85 40.8498 130.813 41.2141C130.813 41.5784 130.813 41.8698 130.813 42.0884L130.759 42.4708H111.525C111.598 44.2193 112.29 45.6764 113.602 46.8421C114.913 48.0078 116.479 48.5906 118.301 48.5906C121.397 48.5906 123.437 47.2246 124.42 44.4925ZM140.58 54H133.312V27.1169H140.58V54ZM132.438 18.3197C132.438 17.0812 132.875 16.0248 133.749 15.1506C134.624 14.2399 135.68 13.7846 136.919 13.7846C138.157 13.7846 139.214 14.2217 140.088 15.0959C140.962 15.9702 141.399 17.0448 141.399 18.3197C141.399 19.5218 140.962 20.56 140.088 21.4342C139.214 22.3085 138.157 22.7456 136.919 22.7456C135.68 22.7456 134.624 22.3085 133.749 21.4342C132.875 20.56 132.438 19.5218 132.438 18.3197ZM170.708 14.4402V49.137C170.708 50.9219 170.781 52.5429 170.926 54H163.987C163.805 53.0893 163.714 52.0512 163.714 50.8855C163.095 52.0147 162.111 52.9254 160.763 53.6175C159.452 54.3096 157.922 54.6557 156.173 54.6557C152.349 54.6557 149.198 53.3261 146.721 50.6669C144.28 47.9713 143.06 44.5836 143.06 40.5038C143.06 36.5332 144.262 33.2002 146.666 30.5046C149.107 27.809 152.203 26.4612 155.955 26.4612C159.816 26.4612 162.348 27.5722 163.55 29.7942V14.4402H170.708ZM150.382 40.5038C150.382 42.8715 151.001 44.7475 152.239 46.1318C153.478 47.4796 155.081 48.1535 157.048 48.1535C158.978 48.1535 160.563 47.4613 161.801 46.0771C163.04 44.6929 163.659 42.8169 163.659 40.4491C163.659 38.1178 163.04 36.2965 161.801 34.9851C160.563 33.6373 158.978 32.9634 157.048 32.9634C155.117 32.9634 153.514 33.6373 152.239 34.9851C151.001 36.3329 150.382 38.1725 150.382 40.5038ZM182.526 46.1864C183.873 47.5342 185.494 48.2081 187.389 48.2081C189.283 48.2081 190.886 47.5342 192.197 46.1864C193.545 44.8386 194.219 42.9626 194.219 40.5584C194.219 38.1542 193.545 36.2783 192.197 34.9305C190.886 33.5827 189.283 32.9088 187.389 32.9088C185.494 32.9088 183.873 33.5827 182.526 34.9305C181.214 36.2783 180.558 38.1542 180.558 40.5584C180.558 42.9626 181.214 44.8386 182.526 46.1864ZM177.28 30.3406C179.976 27.645 183.345 26.2972 187.389 26.2972C191.432 26.2972 194.783 27.645 197.442 30.3406C200.138 33.0362 201.486 36.4422 201.486 40.5584C201.486 44.6747 200.138 48.0806 197.442 50.7762C194.783 53.4718 191.432 54.8196 187.389 54.8196C183.345 54.8196 179.976 53.4718 177.28 50.7762C174.621 48.0806 173.291 44.6747 173.291 40.5584C173.291 36.4422 174.621 33.0362 177.28 30.3406Z" fill="#0F547E"/>
                            <path d="M223.396 33.3459H212.632V54H205.31V33.3459H200.829V27.1169H205.31V24.057C205.31 21.0335 206.184 18.6111 207.933 16.7898C209.717 14.9684 212.103 14.0578 215.09 14.0578C216.693 14.0578 217.895 14.2399 218.697 14.6042V20.7239C218.077 20.5418 217.312 20.4507 216.402 20.4507C215.418 20.4507 214.544 20.7421 213.779 21.325C213.014 21.8714 212.632 22.8185 212.632 24.1663V27.1169H230.608V54H223.396V33.3459ZM223.833 21.4342C222.959 20.56 222.522 19.5036 222.522 18.2651C222.522 17.0266 222.959 15.9702 223.833 15.0959C224.707 14.1853 225.764 13.7299 227.002 13.7299C228.241 13.7299 229.297 14.1853 230.171 15.0959C231.045 15.9702 231.483 17.0266 231.483 18.2651C231.483 19.5036 231.045 20.56 230.171 21.4342C229.297 22.2721 228.241 22.691 227.002 22.691C225.764 22.691 224.707 22.2721 223.833 21.4342ZM242.403 38.5367V54H235.136V27.1169H242.184V30.4499C242.949 29.1386 244.042 28.1368 245.463 27.4447C246.884 26.7526 248.377 26.4065 249.943 26.4065C253.113 26.4065 255.517 27.4083 257.156 29.4118C258.832 31.3788 259.669 33.9287 259.669 37.0614V54H252.402V38.3182C252.402 36.7154 251.983 35.4222 251.146 34.4387C250.344 33.4552 249.106 32.9634 247.43 32.9634C245.9 32.9634 244.68 33.4916 243.769 34.548C242.858 35.6044 242.403 36.9339 242.403 38.5367Z" fill="#28B2B6"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Backtest Results & Performance Analysis</h1>
                    </div>
                </div>
            </div>
             <section class="config-section">
                <h2><span class="section-number">1</span>Customer Scoring Results</h2>
                <div class="results-filter">
                    <button class="filter-tab active" data-filter="all">All (2.3 Lakhs)</button>
                    <button class="filter-tab" data-filter="approved">Approved (1.9 Lakhs)</button>
                    <button class="filter-tab" data-filter="rejected">Rejected (0.4 Lakhs)</button>
                </div>
                <div class="results-table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Time & Date</th>
                                <th>Loan ID</th>
                                <th>Customer ID</th>
                                <th>ki score</th>
                                <th>Risk Level</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="results-tbody">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
             </section>
             <section class="config-section">
                <h2><span class="section-number">2</span>Performance Analytics</h2>
                <fieldset class="fieldset-group" style="margin-bottom: 2rem;"><legend>Default Capture Rate (DCR) by Score Decile</legend>
                    <table class="comparison-table">
                        <thead><tr><th>Score Decile (Riskiest)</th><th>ki score DCR (%)</th><th>Bureau DCR (%)</th></tr></thead>
                        <tbody id="dcr-tbody">
                           <!-- JS will populate this -->
                        </tbody>
                    </table>
                </fieldset>
                <fieldset class="fieldset-group"><legend>Final Performance Lift</legend>
                    <div class="performance-grid">
                        <div class="performance-metric"><h4>Your Approval Rate</h4><p class="perf-value" id="backtest-current-approval-rate"></p></div>
                        <div class="performance-metric"><h4>Backtested Approval Rate</h4><p class="perf-value" id="backtest-new-approval-rate"></p><p class="perf-lift"><i data-lucide="arrow-up"></i> <span id="backtest-approval-lift"></span></p></div>
                        <div class="performance-metric"><h4>Backtested Loss Rate</h4><p class="perf-value" id="backtest-new-loss-rate"></p><p class="perf-lift" style="color: #dc2626;"><i data-lucide="arrow-down"></i> <span id="backtest-loss-reduction"></span></p></div>
                    </div>
                </fieldset>
             </section>
             <div class="button-group">
                <button type="button" class="back-button" id="back-btn-4">Back to Mapping</button>
                <button type="button" class="secondary-button" id="build-new-model-btn">Build New Model</button>
                <button type="button" class="submit-button" id="deploy-prebuilt-btn">Deploy Pre-built Model</button>
             </div>
        </div>

        <!-- NEW MODEL BUILDING PAGES -->
        <div id="target-selection-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Target Variable Selection</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Based on your backtesting data, select the performance metric you want to predict.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Select Target Variable</h2>
                <p>Choose the default performance metric that will be used to train your custom model:</p>
                <div class="input-group">
                    <label class="custom-control radio">
                        <input type="radio" name="target_variable" value="dpd30" checked>
                        <span class="checkmark"></span>
                        <strong>DPD 30+</strong> - Days Past Due 30 or more days
                    </label>
                    <label class="custom-control radio">
                        <input type="radio" name="target_variable" value="dpd60">
                        <span class="checkmark"></span>
                        <strong>DPD 60+</strong> - Days Past Due 60 or more days
                    </label>
                    <label class="custom-control radio">
                        <input type="radio" name="target_variable" value="dpd90">
                        <span class="checkmark"></span>
                        <strong>DPD 90+</strong> - Days Past Due 90 or more days
                    </label>
                </div>
            </section>
            
            <section class="config-section">
                <h2><span class="section-number">2</span>Select Time Period</h2>
                <p>Choose the observation period for the target variable:</p>
                <div class="input-group">
                    <label class="custom-control radio">
                        <input type="radio" name="time_period" value="6months" checked>
                        <span class="checkmark"></span>
                        <strong>6 Months</strong> - Observe performance over 6 months
                    </label>
                    <label class="custom-control radio">
                        <input type="radio" name="time_period" value="12months">
                        <span class="checkmark"></span>
                        <strong>12 Months</strong> - Observe performance over 12 months
                    </label>
                    <label class="custom-control radio">
                        <input type="radio" name="time_period" value="18months">
                        <span class="checkmark"></span>
                        <strong>18 Months</strong> - Observe performance over 18 months
                    </label>
                </div>
                <div class="info-box">
                    <p><strong>Note:</strong> These performance metrics are automatically collected from your uploaded backtesting data and will be used to train the model.</p>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-backtest-btn">Back to Backtest Results</button>
                <button type="button" class="submit-button" id="proceed-to-features-btn">Proceed to Feature Engineering</button>
            </div>
        </div>

        <div id="feature-exploration-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Automated Feature Engineering</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Our engine is analyzing your data and creating powerful new features to improve model accuracy.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Feature Generation Progress</h2>
                <div class="feature-generation-status">
                    <div class="status-item">
                        <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                        <span>Bureau Data Analysis Complete</span>
                    </div>
                    <div class="status-item">
                        <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                        <span>Application Data Processing Complete</span>
                    </div>
                    <div class="status-item">
                        <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                        <span>Bank Statement Analysis Complete</span>
                    </div>
                    <div class="status-item">
                        <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                        <span>Alternative Data Processing Complete</span>
                    </div>
                    <div class="status-item">
                        <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                        <span>Feature Engineering Complete</span>
                    </div>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">2</span>Feature Categories Overview</h2>
                <div class="feature-overview-grid">
                    <div class="feature-card">
                        <h5>Bureau Features</h5>
                        <div class="feature-count">1,247 features</div>
                        <div class="feature-list">
                            <div class="feature-item">credit_utilization_ratio</div>
                            <div class="feature-item">payment_history_score</div>
                            <div class="feature-item">days_since_last_inquiry</div>
                            <div class="feature-item">avg_credit_per_account</div>
                            <div class="feature-item">credit_history_length</div>
                            <div class="feature-item">+ 1,242 more features</div>
                        </div>
                        <button class="see-more-btn" onclick="showFeatureDetails('bureau')">See More</button>
                    </div>
                    <div class="feature-card">
                        <h5>Bank Statement Features</h5>
                        <div class="feature-count">234 features</div>
                        <div class="feature-list">
                            <div class="feature-item">debt_to_income_ratio</div>
                            <div class="feature-item">monthly_income_stability</div>
                            <div class="feature-item">avg_balance_3months</div>
                            <div class="feature-item">transaction_frequency</div>
                            <div class="feature-item">cash_flow_pattern</div>
                            <div class="feature-item">+ 229 more features</div>
                        </div>
                        <button class="see-more-btn" onclick="showFeatureDetails('bank')">See More</button>
                    </div>
                    <div class="feature-card">
                        <h5>Application Data Features</h5>
                        <div class="feature-count">38 features</div>
                        <div class="feature-list">
                            <div class="feature-item">loan_to_income_ratio</div>
                            <div class="feature-item">employment_stability_index</div>
                            <div class="feature-item">home_ownership_flag</div>
                            <div class="feature-item">education_level_score</div>
                            <div class="feature-item">loan_purpose_risk</div>
                            <div class="feature-item">+ 33 more features</div>
                        </div>
                        <button class="see-more-btn" onclick="showFeatureDetails('application')">See More</button>
                    </div>
                    <div class="feature-card">
                        <h5>Alternative Data Features</h5>
                        <div class="feature-count">156 features</div>
                        <div class="feature-list">
                            <div class="feature-item">digital_footprint_score</div>
                            <div class="feature-item">social_media_presence</div>
                            <div class="feature-item">device_usage_pattern</div>
                            <div class="feature-item">location_stability_index</div>
                            <div class="feature-item">behavioral_risk_score</div>
                            <div class="feature-item">+ 151 more features</div>
                        </div>
                        <button class="see-more-btn" onclick="showFeatureDetails('alternative')">See More</button>
                    </div>
                </div>
                <div class="info-box">
                    <p><strong>Total Features Generated:</strong> 1,675 features across all data sources. These features will be automatically evaluated and selected in the next step.</p>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-target-btn">Back to Target Selection</button>
                <button type="button" class="submit-button" id="proceed-to-algorithm-btn">Proceed to Feature & Algorithm Selection</button>
            </div>
        </div>

        <div id="algorithm-selection-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Model Comparison & Feature Importance Analysis</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Compare different algorithms with their key features and performance metrics.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">2</span>Model Details <i class="info-icon" data-lucide="info" title="Click for model details"></i></h2>
                <div class="model-comparison-grid">
                    <div class="model-card">
                        <h4> XGBoost (Winner)</h4>
                        <div class="performance-metrics">
                            <div class="metric-item">
                                <span class="metric-label">AUC-ROC</span>
                                <span class="metric-value">88.7%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Precision</span>
                                <span class="metric-value">84.2%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Recall</span>
                                <span class="metric-value">87.1%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">F1-Score</span>
                                <span class="metric-value">85.6%</span>
                            </div>
                        </div>
                        <div class="feature-importance">
                            <h5>Top 5 Features (SHAP Values)</h5>
                            <div class="feature-weight">
                                <span>FOIR</span>
                                <div class="weight-bar" style="width: 95%"></div>
                                <span>0.095</span>
                            </div>
                            <div class="feature-weight">
                                <span>LTV Ratio</span>
                                <div class="weight-bar" style="width: 87%"></div>
                                <span>0.087</span>
                            </div>
                            <div class="feature-weight">
                                <span>Mobile Money Volume</span>
                                <div class="weight-bar" style="width: 82%"></div>
                                <span>0.082</span>
                            </div>
                            <div class="feature-weight">
                                <span>Min Income</span>
                                <div class="weight-bar" style="width: 78%"></div>
                                <span>0.078</span>
                            </div>
                            <div class="feature-weight">
                                <span>DPD 30+</span>
                                <div class="weight-bar" style="width: 74%"></div>
                                <span>0.074</span>
                            </div>
                        </div>
                        <div class="model-details-summary">
                            <p><strong>Features Used:</strong> 22 (Bureau: 8, Bank: 6, App: 5, Alt: 3)</p>
                            <p><strong>Hyperparameters:</strong> learning_rate=0.1, max_depth=8, n_estimators=150</p>
                        </div>
                    </div>
                    <div class="model-card">
                        <h4> Random Forest</h4>
                        <div class="performance-metrics">
                            <div class="metric-item">
                                <span class="metric-label">AUC-ROC</span>
                                <span class="metric-value">87.3%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Precision</span>
                                <span class="metric-value">82.1%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Recall</span>
                                <span class="metric-value">85.7%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">F1-Score</span>
                                <span class="metric-value">83.9%</span>
                            </div>
                        </div>
                        <div class="feature-importance">
                            <h5>Top 5 Features (SHAP Values)</h5>
                            <div class="feature-weight">
                                <span>credit_score</span>
                                <div class="weight-bar" style="width: 92%"></div>
                                <span>0.092</span>
                            </div>
                            <div class="feature-weight">
                                <span>loan_to_income_ratio</span>
                                <div class="weight-bar" style="width: 85%"></div>
                                <span>0.085</span>
                            </div>
                            <div class="feature-weight">
                                <span>credit_history_length</span>
                                <div class="weight-bar" style="width: 81%"></div>
                                <span>0.081</span>
                            </div>
                            <div class="feature-weight">
                                <span>debt_to_income_ratio</span>
                                <div class="weight-bar" style="width: 76%"></div>
                                <span>0.076</span>
                            </div>
                            <div class="feature-weight">
                                <span>employment_stability_index</span>
                                <div class="weight-bar" style="width: 72%"></div>
                                <span>0.072</span>
                            </div>
                        </div>
                        <div class="model-details-summary">
                            <p><strong>Features Used:</strong> 18 (Bureau: 7, Bank: 5, App: 4, Alt: 2)</p>
                            <p><strong>Hyperparameters:</strong> n_estimators=200, max_depth=15</p>
                        </div>
                    </div>
                    <div class="model-card">
                        <h4> Neural Network</h4>
                        <div class="performance-metrics">
                            <div class="metric-item">
                                <span class="metric-label">AUC-ROC</span>
                                <span class="metric-value">86.1%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Precision</span>
                                <span class="metric-value">81.3%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Recall</span>
                                <span class="metric-value">84.2%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">F1-Score</span>
                                <span class="metric-value">82.7%</span>
                            </div>
                        </div>
                        <div class="feature-importance">
                            <h5>Top 5 Features (SHAP Values)</h5>
                            <div class="feature-weight">
                                <span>loan_to_income_ratio</span>
                                <div class="weight-bar" style="width: 89%"></div>
                                <span>0.089</span>
                            </div>
                            <div class="feature-weight">
                                <span>debt_to_income_ratio</span>
                                <div class="weight-bar" style="width: 86%"></div>
                                <span>0.086</span>
                            </div>
                            <div class="feature-weight">
                                <span>credit_score</span>
                                <div class="weight-bar" style="width: 84%"></div>
                                <span>0.084</span>
                            </div>
                            <div class="feature-weight">
                                <span>employment_stability_index</span>
                                <div class="weight-bar" style="width: 79%"></div>
                                <span>0.079</span>
                            </div>
                            <div class="feature-weight">
                                <span>credit_history_length</span>
                                <div class="weight-bar" style="width: 75%"></div>
                                <span>0.075</span>
                            </div>
                        </div>
                        <div class="model-details-summary">
                            <p><strong>Features Used:</strong> 25 (Bureau: 9, Bank: 7, App: 6, Alt: 3)</p>
                            <p><strong>Hyperparameters:</strong> layers=[64,32,16], dropout=0.2</p>
                        </div>
                    </div>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-features-btn">Back to Feature Engineering</button>
                <button type="button" class="submit-button" id="proceed-to-rules-btn">Proceed to Rules Configuration</button>
            </div>
        </div>

        <div id="rules-configuration-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Rules Configuration & Decision Tree</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Select variables and configure cutoffs to build your custom decision tree.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Variable Selection</h2>
                <div class="variable-selection">
                    <div class="variable-group">
                        <h4>Select Variables for Decision Tree</h4>
                        <div class="input-group">
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="foir" checked disabled>
                                <span class="checkmark"></span>
                                <strong>FOIR (Always First Variable)</strong>
                                <input type="number" id="foir-threshold" value="55" min="30" max="80" step="5" class="threshold-input" readonly>
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="foir">
                                <span class="checkmark"></span>
                                FOIR (Fixed Obligation to Income Ratio)
                                <input type="number" id="foir-threshold" value="60" min="10" max="200" step="10" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="min_income">
                                <span class="checkmark"></span>
                                Minimum Income
                                <input type="number" id="min-income-threshold" value="25000" min="10000" max="100000" step="1000" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="ltv">
                                <span class="checkmark"></span>
                                LTV (Loan to Value)
                                <input type="number" id="ltv-threshold" value="80" min="50" max="95" step="5" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="current_dpd_30">
                                <span class="checkmark"></span>
                                Current DPD 30+
                                <input type="number" id="current-dpd-threshold" value="0" min="0" max="12" step="1" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="dpd_6months_90">
                                <span class="checkmark"></span>
                                DPD Last 6 Months 90+
                                <input type="number" id="dpd-6months-threshold" value="0" min="0" max="6" step="1" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="open_loans">
                                <span class="checkmark"></span>
                                Number of Open Loans
                                <input type="number" id="open-loans-threshold" value="3" min="0" max="10" step="1" class="threshold-input">
                            </label>
                            <label class="custom-control checkbox">
                                <input type="checkbox" name="rule_variables" value="credit_enquiries">
                                <span class="checkmark"></span>
                                Credit Enquiries (Last 6 Months)
                                <input type="number" id="credit-enquiries-threshold" value="3" min="0" max="20" step="1" class="threshold-input">
                            </label>
                        </div>
                    </div>
                </div>
                <div class="button-group" style="justify-content: center; margin: 2rem 0;">
                    <button type="button" class="submit-button" id="generate-tree-btn" onclick="generateDecisionTree()">Generate Decision Tree</button>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">2</span>Decision Tree Structure</h2>
                <div id="decision-tree-container">
                    <div class="tree-placeholder">
                        <p> Click "Generate Decision Tree" to create the decision tree with your selected variables and cutoffs.</p>
                    </div>
                </div>
            </section>
            <section class="config-section" id="cutoff-adjustment-section" style="display: none;">
                <h2><span class="section-number">3</span>Adjust Cutoffs & Regenerate</h2>
                <div class="cutoff-adjustment">
                    <div class="cutoff-controls" id="dynamic-cutoff-controls">
                        <!-- Dynamic cutoff controls will be generated here -->
                    </div>
                    <div class="button-group" style="justify-content: center; margin: 1rem 0;">
                        <button type="button" class="submit-button" id="regenerate-tree-btn" onclick="regenerateDecisionTree()">Simulate & Rebuild Tree</button>
                    </div>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-algorithm-btn">Back to Algorithm Selection</button>
                <button type="button" class="submit-button" id="proceed-to-final-btn">Complete Model Setup</button>
            </div>
        </div>

        <div id="model-training-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Model Training & Validation</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Training your custom model with the selected features and algorithm.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Training Progress</h2>
                <div class="training-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                    <div class="training-status">
                        <div class="status-item">
                            <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                            <span>Data Preprocessing Complete</span>
                        </div>
                        <div class="status-item">
                            <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                            <span>Feature Engineering Complete</span>
                        </div>
                        <div class="status-item">
                            <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                            <span>Model Training Complete</span>
                        </div>
                        <div class="status-item">
                            <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                            <span>Cross-Validation Complete</span>
                        </div>
                        <div class="status-item">
                            <i data-lucide="check-circle" style="color: var(--secondary-color);"></i>
                            <span>Model Validation Complete</span>
                        </div>
                    </div>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">2</span>Training Results</h2>
                <div class="training-results">
                    <div class="result-metrics">
                        <h4>Model Performance Metrics:</h4>
                        <div class="metric-grid">
                            <div class="metric-item">
                                <span class="metric-label">Training AUC</span>
                                <span class="metric-value">89.2%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Validation AUC</span>
                                <span class="metric-value">87.3%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Training Time</span>
                                <span class="metric-value">2.3s</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Model Size</span>
                                <span class="metric-value">1.2MB</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-rules-btn">Back to Rules Configuration</button>
                <button type="button" class="submit-button" id="proceed-to-custom-backtest-btn">Proceed to Custom Model Backtest</button>
            </div>
        </div>

        <div id="custom-backtest-results-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title">Custom Model Backtest Results</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Performance analysis of your custom model compared to the pre-built model.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Model Comparison</h2>
                <div class="model-comparison">
                    <div class="comparison-table-container">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Pre-built Model</th>
                                    <th>Custom Model</th>
                                    <th>Improvement</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>AUC Score</td>
                                    <td>84.2%</td>
                                    <td>87.3%</td>
                                    <td class="improvement">+3.1%</td>
                                </tr>
                                <tr>
                                    <td>Approval Rate</td>
                                    <td>68.5%</td>
                                    <td>72.1%</td>
                                    <td class="improvement">+3.6%</td>
                                </tr>
                                <tr>
                                    <td>Loss Rate</td>
                                    <td>4.2%</td>
                                    <td>3.1%</td>
                                    <td class="improvement">-1.1%</td>
                                </tr>
                                <tr>
                                    <td>Precision</td>
                                    <td>78.9%</td>
                                    <td>82.1%</td>
                                    <td class="improvement">+3.2%</td>
                                </tr>
                                <tr>
                                    <td>Recall</td>
                                    <td>81.3%</td>
                                    <td>85.7%</td>
                                    <td class="improvement">+4.4%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">2</span>Custom Model Scoring Results</h2>
                <div class="results-filter">
                    <button class="filter-tab active" data-filter="all">All (2.3 Lakhs)</button>
                    <button class="filter-tab" data-filter="approved">Approved (1.9 Lakhs)</button>
                    <button class="filter-tab" data-filter="rejected">Rejected (0.4 Lakhs)</button>
                </div>
                <div class="results-table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Time & Date</th>
                                <th>Loan ID</th>
                                <th>Customer ID</th>
                                <th>Custom Score</th>
                                <th>Risk Level</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="custom-results-tbody">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-training-btn">Back to Training</button>
                <button type="button" class="secondary-button" id="deploy-model-btn">Deploy Custom Model</button>
            </div>
        </div>

        <div id="final-model-summary-page" class="page">
            <div class="header-container">
                <div class="header-row">
                    <a href="india-home.html" class="kaleidofin-logo" title="Back to Home">
                        <svg width="164" height="30" viewBox="0 0 164 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0.105469 8.45524L17.0689 0V6.76419L0.105469 15.2194V8.45524Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M0.105469 15.3882L17.0689 23.8434V17.0792L0.105469 8.62402V15.3882Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M38.8973 7.79234L32.7479 14.3625L39.0221 23.4083H33.9341L29.8762 17.4412L28.1593 19.2821V23.4083H24.0078V0.428711H28.1593V13.6007L33.4659 7.79234H38.8973Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M43.7233 23.4083H39.5717V7.79236H43.7233V23.4083ZM39.0723 2.68225C39.0723 1.96282 39.322 1.34918 39.8214 0.841347C40.3208 0.312351 40.9244 0.0478516 41.6319 0.0478516C42.3394 0.0478516 42.9429 0.301771 43.4423 0.809609C43.9417 1.31744 44.1915 1.94167 44.1915 2.68225C44.1915 3.38053 43.9417 3.98359 43.4423 4.49142C42.9429 4.99927 42.3394 5.25318 41.6319 5.25318C40.9244 5.25318 40.3208 4.99927 39.8214 4.49142C39.322 3.98359 39.0723 3.38053 39.0723 2.68225Z" fill="#0F547E" style="fill:#0F547E;fill:color(display-p3 0.0588 0.3294 0.4941);fill-opacity:1;"/>
                            <path d="M63.6016 21.7378C62.0603 23.2502 60.1787 24.0064 57.9568 24.0064C55.7349 24.0064 53.8533 23.2502 52.312 21.7378C50.7707 20.2054 50 18.3348 50 16.1258C50 13.9169 50.7707 12.0562 52.312 10.5437C53.8533 9.01139 55.7349 8.24522 57.9568 8.24522C60.1787 8.24522 62.0603 9.01139 63.6016 10.5437C65.1429 12.0562 65.9136 13.9169 65.9136 16.1258C65.9136 18.3348 65.1429 20.2054 63.6016 21.7378ZM55.4947 18.6631C56.1553 19.3198 56.976 19.6482 57.9568 19.6482C58.9376 19.6482 59.7583 19.3198 60.4189 18.6631C61.0795 18.0064 61.4097 17.1606 61.4097 16.1258C61.4097 15.091 61.0795 14.2452 60.4189 13.5885C59.7583 12.9318 58.9376 12.6034 57.9568 12.6034C56.976 12.6034 56.1553 12.9318 55.4947 13.5885C54.8341 14.2452 54.5038 15.091 54.5038 16.1258C54.5038 17.1606 54.8341 18.0064 55.4947 18.6631Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M71.4636 11.3198C71.7439 10.3646 72.3043 9.63825 73.1451 9.14074C74.0058 8.62333 74.9466 8.36462 75.9675 8.36462V13.4392C74.8665 13.2601 73.8356 13.4492 72.8748 14.0064C71.934 14.5437 71.4636 15.489 71.4636 16.8422V23.5885H66.9598V8.66313H71.4636V11.3198Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M80.715 6.57358C80.1946 7.09099 79.5641 7.3497 78.8234 7.3497C78.0828 7.3497 77.4422 7.09099 76.9018 6.57358C76.3813 6.03626 76.1211 5.39945 76.1211 4.66313C76.1211 3.92681 76.3813 3.29995 76.9018 2.78253C77.4422 2.24522 78.0828 1.97656 78.8234 1.97656C79.5641 1.97656 80.1946 2.24522 80.715 2.78253C81.2555 3.29995 81.5257 3.92681 81.5257 4.66313C81.5257 5.39945 81.2555 6.03626 80.715 6.57358ZM76.5715 23.5885V8.66313H81.0753V23.5885H76.5715Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M93.8892 8.66313H98.273V22.8422C98.273 25.1905 97.5023 26.9616 95.961 28.1557C94.4197 29.3696 92.5481 29.9766 90.3462 29.9766C86.9633 29.9766 84.5913 28.7726 83.2301 26.3646L87.0734 24.1557C87.754 25.4094 88.895 26.0363 90.4963 26.0363C91.5573 26.0363 92.388 25.7577 92.9885 25.2004C93.589 24.6631 93.8892 23.8771 93.8892 22.8422V21.4691C92.8484 22.7626 91.3871 23.4094 89.5055 23.4094C87.4037 23.4094 85.6422 22.6731 84.221 21.2004C82.8198 19.7079 82.1192 17.9169 82.1192 15.8273C82.1192 13.7378 82.8198 11.9567 84.221 10.484C85.6422 8.99149 87.4037 8.24522 89.5055 8.24522C91.3871 8.24522 92.8484 8.89199 93.8892 10.1855V8.66313ZM87.6439 18.3348C88.3245 18.9716 89.1952 19.29 90.2561 19.29C91.317 19.29 92.1878 18.9716 92.8684 18.3348C93.549 17.698 93.8892 16.8621 93.8892 15.8273C93.8892 14.7925 93.549 13.9567 92.8684 13.3198C92.1878 12.683 91.317 12.3646 90.2561 12.3646C89.1952 12.3646 88.3245 12.683 87.6439 13.3198C86.9633 13.9567 86.623 14.7925 86.623 15.8273C86.623 16.8621 86.9633 17.698 87.6439 18.3348Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M104.219 6.57358C103.699 7.09099 103.068 7.3497 102.328 7.3497C101.587 7.3497 100.947 7.09099 100.406 6.57358C99.8858 6.03626 99.6255 5.39945 99.6255 4.66313C99.6255 3.92681 99.8858 3.29995 100.406 2.78253C100.947 2.24522 101.587 1.97656 102.328 1.97656C103.068 1.97656 103.699 2.24522 104.219 2.78253C104.76 3.29995 105.03 3.92681 105.03 4.66313C105.03 5.39945 104.76 6.03626 104.219 6.57358ZM100.076 23.5885V8.66313H104.58V23.5885H100.076Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M115.172 8.24522C116.773 8.24522 118.104 8.79248 119.165 9.88701C120.246 10.9815 120.787 12.494 120.787 14.4243V23.5885H116.283V15.081C116.283 14.2054 116.033 13.5388 115.532 13.081C115.052 12.6034 114.431 12.3646 113.67 12.3646C112.81 12.3646 112.129 12.6233 111.629 13.1407C111.128 13.6582 110.878 14.4243 110.878 15.4393V23.5885H106.374V8.66313H110.878V10.0661C111.779 8.85219 113.21 8.24522 115.172 8.24522Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M133.277 8.66313H137.781V23.5885H133.277V22.1855C132.217 23.3995 130.725 24.0064 128.804 24.0064C126.822 24.0064 125.131 23.2502 123.729 21.7378C122.328 20.2054 121.628 18.3348 121.628 16.1258C121.628 13.9169 122.328 12.0562 123.729 10.5437C125.131 9.01139 126.822 8.24522 128.804 8.24522C130.725 8.24522 132.217 8.85219 133.277 10.0661V8.66313ZM127.122 18.7825C127.783 19.4393 128.644 19.7676 129.704 19.7676C130.765 19.7676 131.626 19.4393 132.287 18.7825C132.947 18.1258 133.277 17.2402 133.277 16.1258C133.277 15.0114 132.947 14.1258 132.287 13.4691C131.626 12.8124 130.765 12.484 129.704 12.484C128.644 12.484 127.783 12.8124 127.122 13.4691C126.462 14.1258 126.131 15.0114 126.131 16.1258C126.131 17.2402 126.462 18.1258 127.122 18.7825Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M148.382 12.9616H145.289V18.2452C145.289 18.8422 145.529 19.2203 146.01 19.3795C146.49 19.5388 147.281 19.5885 148.382 19.5288V23.5885C145.519 23.887 143.538 23.6184 142.437 22.7825C141.336 21.9268 140.785 20.4144 140.785 18.2452V12.9616H138.383V8.66313H140.785V5.82731L145.289 4.48403V8.66313H148.382V12.9616Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                            <path d="M153.161 17.9169C153.681 19.3099 154.882 20.0064 156.764 20.0064C157.985 20.0064 158.946 19.6283 159.646 18.8721L163.249 20.9318C161.768 22.9815 159.586 24.0064 156.704 24.0064C154.182 24.0064 152.16 23.2601 150.639 21.7676C149.137 20.2751 148.387 18.3945 148.387 16.1258C148.387 13.8771 149.127 12.0064 150.609 10.5139C152.11 9.00144 154.032 8.24522 156.373 8.24522C158.555 8.24522 160.367 9.00144 161.808 10.5139C163.269 12.0064 164 13.8771 164 16.1258C164 16.7626 163.94 17.3596 163.82 17.9169H153.161ZM153.071 14.5736H159.526C159.086 13.0014 158.025 12.2154 156.343 12.2154C154.602 12.2154 153.511 13.0014 153.071 14.5736Z" fill="#28B2B6" style="fill:#28B2B6;fill:color(display-p3 0.1569 0.6980 0.7137);fill-opacity:1;"/>
                        </svg>
                    </a>
                    <div class="page-title">
                        <h1 class="inline-title"> Custom Model Complete!</h1>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark-gray);">Your personalized credit scoring model is ready for deployment.</p>
                    </div>
                </div>
            </div>
            <section class="config-section">
                <h2><span class="section-number">1</span>Model Summary</h2>
                <div class="model-summary-card">
                    <div class="summary-header">
                        <h3>Custom XGBoost Model</h3>
                        <div class="model-badge">Production Ready</div>
                    </div>
                                            <div class="summary-details">
                            <div class="summary-item">
                                <span class="label">Algorithm:</span>
                                <span class="value">XGBoost Classifier</span>
                            </div>
                            <div class="summary-item">
                                <span class="label">Features Used:</span>
                                <span class="value">22 (top 1.3% of 1,675)</span>
                            </div>
                            <div class="summary-item">
                                <span class="label">Training Data:</span>
                                <span class="value">2.3 lakh applications</span>
                            </div>
                            <div class="summary-item">
                                <span class="label">Performance:</span>
                                <span class="value">AUC-ROC: 88.7%</span>
                            </div>
                        </div>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">2</span>Expected Business Impact</h2>
                <div class="impact-metrics">
                    <div class="impact-card">
                        <div class="impact-icon"></div>
                        <div class="impact-content">
                            <h4>Approval Rate</h4>
                            <div class="impact-value">72.1%</div>
                            <div class="impact-change positive">+3.6% improvement</div>
                        </div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-icon"></div>
                        <div class="impact-content">
                            <h4>Risk Reduction</h4>
                            <div class="impact-value">3.1%</div>
                            <div class="impact-change positive">-1.1% loss rate</div>
                        </div>
                    </div>
                    <div class="impact-card">
                        <div class="impact-icon"></div>
                        <div class="impact-content">
                            <h4>Portfolio Quality</h4>
                            <div class="impact-value">88.7%</div>
                            <div class="impact-change positive">AUC-ROC score</div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="config-section">
                <h2><span class="section-number">3</span>Decision Strategy</h2>
                <div class="strategy-overview">
                    <div class="strategy-summary">
                        <h4> Final Strategy Configuration</h4>
                        <div class="strategy-details">
                            <div class="strategy-item">
                                <span>Primary Variable:</span>
                                <span>FOIR  0.6</span>
                            </div>
                            <div class="strategy-item">
                                <span>Secondary Rules:</span>
                                <span>Min Income  25,000, DPD 30+ = 0</span>
                            </div>
                            <div class="strategy-item">
                                <span>Estimated Approval:</span>
                                <span>82.5% of applications</span>
                            </div>
                            <div class="strategy-item">
                                <span>Estimated Default:</span>
                                <span>3.2% of approved applications</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="button-group">
                <button type="button" class="back-button" id="back-to-rules-btn">Back to Rules Configuration</button>
                <button type="button" class="primary-button" id="finish-setup-btn">Finish Setup</button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="csv-format-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="file-spreadsheet"></i>Required CSV Format</h3><p>Your CSV file should contain individual columns for customer/loan data, and single columns for raw bureau and bank data.</p><pre><code>"loan_id","cust_id","age","gender","loan_amount","bureau_xml","bank_json"
"SF7737745","KF3999955",34,"F",50000,"&lt;cibil&gt;...&lt;/cibil&gt;","[{...}]"
...</code></pre><p><strong>Note:</strong> The data inside the `bank_json` column must be a valid JSON string. The `bureau_xml` column should contain the raw XML or text from the bureau report.</p></div></div>
    <div id="loan-data-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="file-text"></i>Loan Data Points</h3><ul class="data-list"><li><i data-lucide="coins"></i>Loan Amount Requested</li><li><i data-lucide="package"></i>Loan Product Type</li><li><i data-lucide="calendar-days"></i>Tenure (in months)</li><li><i data-lucide="percent-circle"></i>Proposed Interest Rate</li><li><i data-lucide="receipt"></i>Processing Fee</li><li><i data-lucide="building"></i>Originating Branch Code</li></ul></div></div>
    <div id="customer-data-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="user-round"></i>Customer Data Points</h3><ul class="data-list"><li><i data-lucide="cake"></i>Age</li><li><i data-lucide="users"></i>Gender</li><li><i data-lucide="heart"></i>Marital Status</li><li><i data-lucide="graduation-cap"></i>Education Level</li><li><i data-lucide="briefcase"></i>Profession / Occupation</li><li><i data-lucide="user-check"></i>Years in Job/Business</li><li><i data-lucide="map-pin"></i>Residential Pincode</li><li><i data-lucide="clock"></i>Time at Address</li></ul></div></div>
    <div id="digital-footprint-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="smartphone"></i>Digital Footprint</h3><ul class="data-list"><li><i data-lucide="phone"></i>Mobile Number</li><li><i data-lucide="at-sign"></i>Email ID</li></ul></div></div>
    <div id="on-us-repayment-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="history"></i>Sample: Historical On-Us Repayments API</h3><pre>{
  "historical_loans": [
    {
      "AccountID": "2029I240002295",
      "sanctioned_amount": "35000.00",
      "disbursement_date": "2018-11-19",
      "repayment_frequency": "M",
      "instalment_amount": "1850.00",
      "loan_cycle": "1",
      "number_of_instalments": "24",
      "interest_rate": "23.91",
      "loan_status": "Net-Off",
      "loan_schedule": [...],
      "loan_repayment": [...]
    }
  ]
}</pre></div></div>
    <div id="asset-ownership-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="home"></i>Asset Ownership</h3><ul class="data-list"><li><i data-lucide="fridge"></i>Fridge</li><li><i data-lucide="shirt"></i>Washing Machine</li><li><i data-lucide="wind"></i>Air Conditioner</li><li><i data-lucide="bike"></i>Two Wheeler</li><li><i data-lucide="car-front"></i>Four Wheeler</li><li><i data-lucide="home"></i>Owns House (Y/N)</li></ul></div></div>
    <div id="business-details-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="briefcase"></i>Business Details</h3><ul class="data-list"><li><i data-lucide="hash"></i>Udyam Registration No.</li><li><i data-lucide="factory"></i>Nature of Business</li><li><i data-lucide="calendar"></i>Years in Business</li><li><i data-lucide="file-badge"></i>GST Number</li></ul></div></div>
    <div id="land-details-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="mountain"></i>Landholding Details</h3><ul class="data-list"><li><i data-lucide="ruler"></i>Acres Owned</li><li><i data-lucide="cloud-drizzle"></i>Irrigated vs. Non-irrigated</li><li><i data-lucide="file-check"></i>Proof of Ownership Type</li></ul></div></div>
    <div id="crop-details-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="leaf"></i>Crop Details</h3><ul class="data-list"><li><i data-lucide="sprout"></i>Primary Crop(s)</li><li><i data-lucide="wheat"></i>Secondary Crop(s)</li><li><i data-lucide="recycle"></i>Typical Crop Cycle</li></ul></div></div>
    <div id="collateral-details-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="gem"></i>Collateral Details</h3><ul class="data-list"><li><i data-lucide="building-2"></i>Property Type</li><li><i data-lucide="map"></i>Plot Area (sq. ft.)</li><li><i data-lucide="home"></i>Built-up Area (sq. ft.)</li><li><i data-lucide="calendar-clock"></i>Age of Building</li><li><i data-lucide="file-signature"></i>Title Deed Status</li><li><i data-lucide="banknote"></i>Estimated Market Value</li></ul></div></div>
    <div id="vehicle-details-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="car"></i>Vehicle Details</h3><ul class="data-list"><li><i data-lucide="tag"></i>Make & Model</li><li><i data-lucide="indian-rupee"></i>Ex-showroom Price</li><li><i data-lucide="wallet"></i>Down Payment Amount</li></ul></div></div>
    <div id="summ-data-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="bar-chart-3"></i>Sample: Summarised Account Level Data</h3><div class="data-list" style="grid-template-columns: 1fr;">
        <li style="display: grid; grid-template-columns: 1fr 1fr; background: var(--primary-color); color: white;"><strong>Metric</strong><strong>Value</strong></li>
        <li><span>Total Credits</span><span> 55,000</span></li>
        <li><span>Total Debits</span><span> 48,000</span></li>
        <li><span>No. of Credits</span><span>5</span></li>
        <li><span>No. of Debits</span><span>22</span></li>
        <li><span>Average Balance</span><span> 60,000</span></li>
        <li><span>Max Balance</span><span> 85,000</span></li>
        <li><span>Inflow Categories</span><span>Salary, Other</span></li>
        <li><span>Outflow Categories</span><span>EMI, Rent, Utilities</span></li>
    </div></div></div>
    <div id="txn-data-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="check-circle-2"></i>Sample: Transaction Level Data</h3><pre>Date,Description,Debit,Credit,Balance
01-08-2025,SALARY DEPOSIT, ,50000.00,75000.00
02-08-2025,ATM WDL-ANYTOWN,2000.00, ,73000.00</pre></div></div>
    <div id="socio-data-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="building-2"></i>Socioeconomic Variables</h3><ul class="data-list"><li><i data-lucide="school"></i>Number of schools nearby</li><li><i data-lucide="hospital"></i>Number of hospitals nearby</li><li><i data-lucide="home"></i>% households with RCC roofs</li><li><i data-lucide="car"></i>Car ownership % in area</li><li><i data-lucide="landmark"></i>Bank branches per 1000 people</li><li><i data-lucide="shield-alert"></i>Local Crime Rate</li></ul></div></div>
    <div id="climate-risk-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="cloud-rain"></i>Climate Risk Factor</h3><ul class="data-list"><li><i data-lucide="cloud-drizzle"></i>Rainfall patterns</li><li><i data-lucide="sun"></i>Drought risk indicators</li><li><i data-lucide="waves"></i>Flood risk assessment</li><li><i data-lucide="thermometer-sun"></i>Climate vulnerability score</li></ul></div></div>
    <div id="digital-footprint-modal" class="modal"><div class="modal-content"><span class="close-modal">&times;</span><h3><i data-lucide="smartphone"></i>Digital Footprint</h3><p style="margin-bottom: 1.5rem; color: var(--dark-gray);">Digital stability indicators that demonstrate customer reliability and longevity.</p><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;"><div style="background-color: var(--light-gray); border-radius: 8px; padding: 1.25rem;"><h4 style="margin: 0 0 1rem 0; color: var(--primary-color);">Mobile Number Stability</h4><ul class="data-list" style="margin: 0;"><li style="padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb;"><i data-lucide="calendar"></i>Years of mobile phone usage</li><li style="padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb;"><i data-lucide="phone"></i>Mobile number length validation</li><li style="padding: 0.5rem 0; border-bottom: none;"><i data-lucide="signal"></i>Telecom provider stability</li></ul></div><div style="background-color: var(--light-gray); border-radius: 8px; padding: 1.25rem;"><h4 style="margin: 0 0 1rem 0; color: var(--primary-color);">Email Stability</h4><ul class="data-list" style="margin: 0;"><li style="padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb;"><i data-lucide="clock"></i>Email ID active since (years)</li><li style="padding: 0.5rem 0; border-bottom: 1px solid #e5e7eb;"><i data-lucide="type"></i>Email length and format</li><li style="padding: 0.5rem 0; border-bottom: none;"><i data-lucide="at-sign"></i>Email provider reliability</li></ul></div></div><div style="background-color: #f0f9ff; border: 1px solid #0ea5e9; border-radius: 8px; padding: 1rem; margin-top: 1.5rem;"><p style="margin: 0; color: #0c4a6e; font-size: 0.9rem;"><i data-lucide="info" style="width: 16px; height: 16px; margin-right: 0.5rem;"></i>Longer usage periods indicate customer stability and lower likelihood of default.</p></div></div></div>
    <div id="income-estimates-modal" class="modal"><div class="modal-content" style="max-width: 600px;"><span class="close-modal">&times;</span><h3><i data-lucide="trending-up"></i>Income Estimates</h3><p style="margin-bottom: 1.5rem; color: var(--dark-gray); font-size: 1rem; line-height: 1.5;">Income estimates are calculated based on the following data:</p><div style="background-color: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem;"><p style="margin: 0; color: #92400e; font-weight: 500; font-size: 0.9rem;"><i data-lucide="info" style="width: 16px; height: 16px; margin-right: 0.5rem;"></i>Note: These are sample data points. Additional indicators may be used based on data availability.</p></div><div style="background-color: var(--light-gray); border-radius: 8px; padding: 1.25rem; margin-bottom: 1.5rem;"><h4 style="margin: 0 0 1rem 0; color: var(--primary-color); font-size: 1rem;">Primary Indicator:</h4><ul class="data-list" style="margin: 0;"><li style="padding: 0.5rem 0; border-bottom: none;"><i data-lucide="credit-card"></i>Monthly debt repayments</li></ul></div><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;"><div style="background-color: var(--white); border: 1px solid var(--medium-gray); border-radius: 8px; padding: 1.25rem;"><h4 style="margin: 0 0 1rem 0; color: var(--primary-color); font-size: 1rem;">Access to Amenities</h4><div style="font-size: 0.9rem; color: var(--dark-gray); margin-bottom: 0.75rem;">Examples:</div><ul class="data-list" style="margin: 0;"><li style="padding: 0.4rem 0; border-bottom: 1px solid #f3f4f6; font-size: 0.9rem;"><i data-lucide="droplets" style="width: 16px; height: 16px;"></i>Access to drinking water within the premises</li><li style="padding: 0.4rem 0; border-bottom: 1px solid #f3f4f6; font-size: 0.9rem;"><i data-lucide="home" style="width: 16px; height: 16px;"></i>Access to toilet within the premises</li><li style="padding: 0.4rem 0; border-bottom: none; font-size: 0.9rem;"><i data-lucide="flame" style="width: 16px; height: 16px;"></i>Access to LPG for cooking</li></ul></div><div style="background-color: var(--white); border: 1px solid var(--medium-gray); border-radius: 8px; padding: 1.25rem;"><h4 style="margin: 0 0 1rem 0; color: var(--primary-color); font-size: 1rem;">Ownership of Assets</h4><div style="font-size: 0.9rem; color: var(--dark-gray); margin-bottom: 0.75rem;">Examples:</div><ul class="data-list" style="margin: 0;"><li style="padding: 0.4rem 0; border-bottom: 1px solid #f3f4f6; font-size: 0.9rem;"><i data-lucide="bike" style="width: 16px; height: 16px;"></i>Ownership of scooter</li><li style="padding: 0.4rem 0; border-bottom: 1px solid #f3f4f6; font-size: 0.9rem;"><i data-lucide="monitor" style="width: 16px; height: 16px;"></i>Ownership of computer</li><li style="padding: 0.4rem 0; border-bottom: none; font-size: 0.9rem;"><i data-lucide="refrigerator" style="width: 16px; height: 16px;"></i>Ownership of refrigerator</li></ul></div></div></div></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pages = document.querySelectorAll('.page');
            const showPage = (pageId) => {
                window.scrollTo(0, 0);
                pages.forEach(p => p.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                lucide.createIcons();
            };

            // Page navigation listeners
            document.getElementById('proceed-btn').addEventListener('click', () => showPage('institution-profile-page'));
            document.getElementById('back-btn-1').addEventListener('click', () => showPage('data-selection-page'));
            document.getElementById('recommend-btn').addEventListener('click', generateRecommendation);
            document.getElementById('back-btn-2').addEventListener('click', () => showPage('institution-profile-page'));
            document.getElementById('backtest-btn').addEventListener('click', () => showPage('backtest-page'));
            document.getElementById('back-btn-3').addEventListener('click', () => showPage('recommendation-page'));
            document.getElementById('run-backtest-btn').addEventListener('click', setupAndShowMappingPage);
            document.getElementById('back-btn-mapping').addEventListener('click', () => showPage('backtest-page'));
            document.getElementById('validate-and-run-btn').addEventListener('click', runBacktest);
            document.getElementById('back-btn-4').addEventListener('click', () => showPage('mapping-page'));

            const setupStartOver = (btnId) => {
                 const startOverBtn = document.getElementById(btnId);
                 if(startOverBtn) {
                    startOverBtn.addEventListener('click', () => {
                        document.getElementById('model-config-form').reset();
                        document.querySelector('input[name="bureau_setup"][value="single"]').dispatchEvent(new Event('change'));
                        document.querySelector('input[name="asset_class"][value="MFI"]').dispatchEvent(new Event('change'));
                        document.getElementById('include-bank-statement').dispatchEvent(new Event('change'));
                        showPage('data-selection-page');
                    });
                 }
            };
            setupStartOver('start-over-btn-2');


            // Asset Class Specific Logic
            const assetClassRadios = document.querySelectorAll('input[name="asset_class"]');
            const assetSpecificSection = document.getElementById('asset-specific-data-section');
            assetClassRadios.forEach(radio => radio.addEventListener('change', () => {
                const selectedAsset = document.querySelector('input[name="asset_class"]:checked').value;
                let hasVisibleChild = false;
                document.querySelectorAll('#asset-specific-data-section [data-asset-class]').forEach(el => {
                    const isVisible = el.getAttribute('data-asset-class').includes(selectedAsset);
                    el.style.display = isVisible ? 'block' : 'none';
                    if (isVisible) hasVisibleChild = true;
                });
                assetSpecificSection.style.display = hasVisibleChild ? 'block' : 'none';
            }));

            // States and UTs for India
            const states = ["Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa", "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand", "Karnataka", "Kerala", "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram", "Nagaland", "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura", "Uttar Pradesh", "Uttarakhand", "West Bengal", "Andaman and Nicobar Islands", "Chandigarh", "Dadra and Nagar Haveli and Daman and Diu", "Delhi", "Jammu and Kashmir", "Ladakh", "Lakshadweep", "Puducherry"];
            const geoSelect = document.getElementById('geo');
            states.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                geoSelect.appendChild(option);
            });

            // Bureau Score Profile Calculation
            const scoreInputs = document.querySelectorAll('.score-input');
            const overallRateEl = document.getElementById('overall-approval-rate');
            const calculateOverallApproval = () => {
                let totalRate = 0;
                let totalPop = 0;
                const rows = document.querySelectorAll('.score-bucket-row');
                rows.forEach(row => {
                    const pop = parseFloat(row.querySelector('[data-bucket="pop"]').value) || 0;
                    const app = parseFloat(row.querySelector('[data-bucket="app"]').value) || 0;
                    totalPop += pop;
                    totalRate += (pop / 100) * (app / 100);
                });
                if (totalPop !== 100) {
                     overallRateEl.textContent = 'Population must sum to 100%';
                     overallRateEl.style.color = '#dc2626';
                } else {
                    overallRateEl.textContent = (totalRate * 100).toFixed(1) + '%';
                    overallRateEl.style.color = 'var(--primary-color)';
                }
            };
            scoreInputs.forEach(input => input.addEventListener('input', calculateOverallApproval));

            function generateRecommendation() {
                const assetClassDisplayNames = { 'MFI': 'MFI', 'MSME_S': 'MSME (Secured)', 'MSME_U': 'MSME (Unsecured)', 'Agri': 'Agri Loans', 'Housing': 'Affordable Housing', '2W': 'Two Wheeler' };
                const assetClassValue = document.querySelector('input[name="asset_class"]:checked').value;
                const assetClassName = assetClassDisplayNames[assetClassValue];
                const lossRate = parseFloat(document.getElementById('loss-rate').value) || 2.5;
                const currentApprovalRate = parseFloat(overallRateEl.textContent);

                let modelName = `KI-Score ${assetClassName} Pro`;
                let modelDesc = `An advanced predictive model tailored for <b>${assetClassName}</b> lending. It leverages core application and bureau data to provide a robust risk assessment.`;
                let approvalLift = 1.10;
                let lossReduction = 0.85;

                if (document.getElementById('include-bank-statement').checked) {
                    modelName += " Plus";
                    modelDesc += " Incorporates <b>bank statement analysis</b> for deeper financial insights.";
                    approvalLift += 0.05;
                    lossReduction -= 0.05;
                }
                if (document.querySelector('#data-selection-page section:nth-of-type(5) input:checked')) {
                    modelName += " AI";
                    modelDesc += " Further enhanced with our <b>proprietary alternate data</b>, it excels at scoring thin-file customers and identifying nuanced risk patterns."
                    approvalLift += 0.08;
                    lossReduction -= 0.10;
                }

                document.getElementById('rec-model-name').textContent = modelName;
                document.getElementById('rec-model-desc').innerHTML = modelDesc;
                const newApprovalRate = currentApprovalRate * approvalLift;
                const newLossRate = lossRate * lossReduction;

                document.getElementById('current-approval-rate').textContent = currentApprovalRate.toFixed(1) + '%';
                document.getElementById('new-approval-rate').textContent = newApprovalRate.toFixed(1) + '%';
                document.getElementById('approval-lift').textContent = `${((approvalLift - 1) * 100).toFixed(0)}% Lift`;
                document.getElementById('new-loss-rate').textContent = newLossRate.toFixed(1) + '%';
                document.getElementById('loss-reduction').textContent = `${((1 - lossReduction) * 100).toFixed(0)}% Reduction`;
                showPage('recommendation-page');
            }
            
            // --- MOCK DATA FOR RESULTS ---
            const mockResultsData = [
                { time: '11:33 10 Jul', loanId: 'SF7737745', custId: 'KF3999955', score: 14, risk: 'Low', status: 'Approved' },
                { time: '10:30 12 Jul', loanId: 'ML8388834', custId: 'KF3999949', score: 68, risk: 'High', status: 'Rejected' },
                { time: '12:40 08 Jul', loanId: 'F882884', custId: 'KF7757758', score: 91, risk: 'High', status: 'Rejected' },
                { time: '09:15 11 Jul', loanId: 'AP9134567', custId: 'KF4822199', score: 22, risk: 'Low', status: 'Approved' },
                { time: '14:05 10 Jul', loanId: 'CD2345678', custId: 'KF8813455', score: 35, risk: 'Medium', status: 'Approved' },
                { time: '16:50 12 Jul', loanId: 'EF3456789', custId: 'KF9988211', score: 75, risk: 'High', status: 'Rejected' },
                { time: '11:00 09 Jul', loanId: 'GH4567890', custId: 'KF7766554', score: 18, risk: 'Low', status: 'Approved' },
                { time: '10:10 08 Jul', loanId: 'IJ5678901', custId: 'KF3322111', score: 5, risk: 'Low', status: 'Approved' },
                { time: '15:25 11 Jul', loanId: 'KL6789012', custId: 'KF4455667', score: 82, risk: 'High', status: 'Rejected' },
                { time: '17:30 12 Jul', loanId: 'MN7890123', custId: 'KF1122334', score: 28, risk: 'Medium', status: 'Approved' },
                { time: '09:45 10 Jul', loanId: 'OP8901234', custId: 'KF5544332', score: 41, risk: 'Medium', status: 'Approved' },
                { time: '11:55 09 Jul', loanId: 'QR9012345', custId: 'KF9988776', score: 95, risk: 'High', status: 'Rejected' },
                { time: '13:00 12 Jul', loanId: 'ST0123456', custId: 'KF6655443', score: 12, risk: 'Low', status: 'Approved' },
                { time: '14:50 08 Jul', loanId: 'UV1234567', custId: 'KF2211334', score: 33, risk: 'Medium', status: 'Approved' },
                { time: '16:00 11 Jul', loanId: 'WX2345678', custId: 'KF8877665', score: 65, risk: 'High', status: 'Rejected' },
                { time: '10:05 10 Jul', loanId: 'YZ3456789', custId: 'KF1133557', score: 25, risk: 'Medium', status: 'Approved' },
                { time: '12:15 12 Jul', loanId: 'AB4567890', custId: 'KF3344668', score: 7, risk: 'Low', status: 'Approved' },
                { time: '13:45 09 Jul', loanId: 'BC5678901', custId: 'KF5566889', score: 88, risk: 'High', status: 'Rejected' },
                { time: '15:00 08 Jul', loanId: 'CD6789012', custId: 'KF7788990', score: 19, risk: 'Low', status: 'Approved' },
                { time: '17:00 10 Jul', loanId: 'DE7890123', custId: 'KF9900112', score: 38, risk: 'Medium', status: 'Approved' }
            ];

            const dcrData = [
                { decile: 10, ki: 45, bureau: 35 }, { decile: 20, ki: 65, bureau: 52 },
                { decile: 30, ki: 78, bureau: 65 }, { decile: 40, ki: 85, bureau: 73 },
                { decile: 50, ki: 90, bureau: 79 }, { decile: 60, ki: 93, bureau: 84 },
                { decile: 70, ki: 95, bureau: 88 }, { decile: 80, ki: 97, bureau: 92 },
                { decile: 90, ki: 98, bureau: 95 }, { decile: 100, ki: 100, bureau: 100 }
            ];
            
            const populateDcrTable = () => {
                const tbody = document.getElementById('dcr-tbody');
                tbody.innerHTML = '';
                dcrData.forEach(data => {
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>Top ${data.decile}%</td><td>${data.ki}%</td><td>${data.bureau}%</td>`;
                    tbody.appendChild(row);
                });
            };

            const populateResultsTable = (filter) => {
                const tbody = document.getElementById('results-tbody');
                tbody.innerHTML = '';
                const filteredData = filter === 'all' ? mockResultsData : mockResultsData.filter(d => d.status.toLowerCase() === filter);
                
                filteredData.forEach(data => {
                    const row = document.createElement('tr');
                    const statusClass = data.status === 'Approved' ? 'status-approved' : 'status-rejected';
                    row.innerHTML = `
                        <td>${data.time}</td>
                        <td>${data.loanId}</td>
                        <td>${data.custId}</td>
                        <td>${data.score}</td>
                        <td>${data.risk}</td>
                        <td><span class="status-badge ${statusClass}">${data.status}</span></td>
                    `;
                    row.dataset.status = data.status.toLowerCase();
                    tbody.appendChild(row);
                });
            };

            const filterTabs = document.querySelectorAll('.filter-tab');
            filterTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    filterTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const filter = tab.dataset.filter;
                    populateResultsTable(filter);
                });
            });

            function runBacktest() {
                 const currentApprovalRate = parseFloat(overallRateEl.textContent);
                 const lossRate = parseFloat(document.getElementById('loss-rate').value) || 2.5;
                 
                 const backtestApprovalLift = 1.18; // Example: 18% lift from backtest
                 const backtestLossReduction = 0.72; // Example: 28% reduction from backtest
                 
                 const newApprovalRate = currentApprovalRate * backtestApprovalLift;
                 const newLossRate = lossRate * backtestLossReduction;

                 document.getElementById('backtest-current-approval-rate').textContent = currentApprovalRate.toFixed(1) + '%';
                 document.getElementById('backtest-new-approval-rate').textContent = newApprovalRate.toFixed(1) + '%';
                 document.getElementById('backtest-approval-lift').textContent = `${((backtestApprovalLift - 1) * 100).toFixed(0)}% Lift`;
                 document.getElementById('backtest-new-loss-rate').textContent = newLossRate.toFixed(1) + '%';
                 document.getElementById('backtest-loss-reduction').textContent = `${((1 - backtestLossReduction) * 100).toFixed(0)}% Reduction`;
                
                 populateResultsTable('all');
                 populateDcrTable();
                 showPage('backtest-results-page');
            }

            // --- BUREAU LOGIC ---
            const bureauSetupRadios = document.querySelectorAll('input[name="bureau_setup"]');
            const singleBureauOptions = document.getElementById('single-bureau-options');
            const multiBureauOptions = document.getElementById('multi-bureau-options');
            const multiStrategyRadios = document.querySelectorAll('input[name="multi_bureau_strategy"]');
            const waterfallContainer = document.getElementById('waterfall-priority-container');

            bureauSetupRadios.forEach(radio => radio.addEventListener('change', e => {
                const isSingle = e.target.value === 'single';
                singleBureauOptions.style.display = isSingle ? 'block' : 'none';
                multiBureauOptions.style.display = isSingle ? 'none' : 'block';
                if (!isSingle) {
                    document.querySelector('input[name="multi_bureau_strategy"]:checked').dispatchEvent(new Event('change'));
                }
            }));

            multiStrategyRadios.forEach(radio => radio.addEventListener('change', e => {
                 waterfallContainer.style.display = e.target.value === 'waterfall' ? 'block' : 'none';
            }));
            
            const multiCheckboxes = document.querySelectorAll('input[name="bureau_report_multi"]');
            const waterfallList = document.getElementById('waterfall-list');
            multiCheckboxes.forEach(checkbox => checkbox.addEventListener('change', () => {
                waterfallList.innerHTML = '';
                const checkedCheckboxes = document.querySelectorAll('input[name="bureau_report_multi"]:checked');
                checkedCheckboxes.forEach(cb => {
                    const li = document.createElement('li');
                    li.draggable = true;
                    li.dataset.value = cb.value;
                    li.innerHTML = `<i data-lucide="grip-vertical" class="drag-handle"></i>${cb.parentElement.textContent.trim()}`;
                    addDragEvents(li);
                    waterfallList.appendChild(li);
                });
                lucide.createIcons();
            }));

            function addDragEvents(item) {
                item.addEventListener('dragstart', () => item.classList.add('dragging'));
                item.addEventListener('dragend', () => item.classList.remove('dragging'));
            }

            waterfallList.addEventListener('dragover', e => {
                e.preventDefault();
                const afterElement = getDragAfterElement(waterfallList, e.clientY);
                const dragging = document.querySelector('.dragging');
                if (dragging) {
                    if (afterElement == null) { waterfallList.appendChild(dragging); } 
                    else { waterfallList.insertBefore(dragging, afterElement); }
                }
            });

            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('li:not(.dragging)')];
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    if (offset < 0 && offset > closest.offset) { return { offset: offset, element: child }; } 
                    else { return closest; }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            // --- MAPPING LOGIC ---
            function setupAndShowMappingPage() {
                // In a real app, you would parse the uploaded CSV header.
                // For this demo, we use a predefined list that simulates reading from a file.
                const csvColumns = ["loan_id", "customer_id", "bureau_xml_report", "bank_statement", "customer_age", "sex", "marital_status", "location", "loan_amt", "loan_tenure", "dpd_30_performance", "dpd_60_performance", "dpd_90_performance"];
                
                const mappingGrid = document.getElementById('mapping-grid');
                mappingGrid.innerHTML = '<div class="grid-header">Required Model Field</div><div class="grid-header">Your CSV Column</div>'; // Clear and add headers

                // Base required fields (always needed) - Loan ID and Customer ID first
                const baseFields = [
                    { label: "Loan ID", key: "loan_id", hints: ["loan_id", "application_id", "loanid"] },
                    { label: "Customer ID", key: "customer_id", hints: ["customer_id", "cust_id", "customerid"] }
                ];

                // Bureau data fields (RIGHT AFTER CUSTOMER ID)
                const bureauFields = [
                    { label: "Bureau Data (XML)", key: "bureau_raw", hints: ["bureau", "xml", "report"] },
                    { label: "Credit Score", key: "credit_score", hints: ["credit_score", "score", "bureau_score"] },
                    { label: "Number of Open Accounts", key: "open_accounts", hints: ["open_accounts", "accounts", "num_accounts"] },
                    { label: "Total Credit Limit", key: "total_limit", hints: ["total_limit", "credit_limit", "limit"] },
                    { label: "Days Since Last Inquiry", key: "last_inquiry", hints: ["last_inquiry", "inquiry_date", "days_inquiry"] }
                ];

                // Bank statement fields (NEXT AFTER BUREAU)
                const bankFields = [
                    { label: "Bank Statement (XML)", key: "bank_json", hints: ["bank", "xml", "statement"] },
                    { label: "Monthly Income", key: "monthly_income", hints: ["monthly_income", "income", "salary"] },
                    { label: "Average Balance", key: "avg_balance", hints: ["avg_balance", "balance", "account_balance"] },
                    { label: "Transaction Count", key: "transaction_count", hints: ["transaction_count", "transactions", "txn_count"] }
                ];

                // Application data fields (REST OF THE COLUMNS)
                const appDataFields = [
                    { label: "Age", key: "age", hints: ["customer_age"] },
                    { label: "Gender", key: "gender", hints: ["sex"] },
                    { label: "Marital Status", key: "marital_status", hints: ["marital_status"] },
                    { label: "Location", key: "location", hints: ["location"] },
                    { label: "Loan Amount Requested", key: "loan_amount", hints: ["loan_amt"] },
                    { label: "Tenure (in months)", key: "tenure", hints: ["loan_tenure"] }
                ];

                // Performance metrics (for custom model training)
                const performanceFields = [
                    { label: "DPD 30 Performance", key: "dpd_30", hints: ["dpd_30_performance"] },
                    { label: "DPD 60 Performance", key: "dpd_60", hints: ["dpd_60_performance"] },
                    { label: "DPD 90 Performance", key: "dpd_90", hints: ["dpd_90_performance"] }
                ];

                // Combine all required fields based on selections
                let requiredFields = [...baseFields];

                // Add bureau fields if bureau data is selected (it's always selected by default)
                requiredFields = requiredFields.concat(bureauFields);

                // Add bank statement fields if selected
                if (document.getElementById('include-bank-statement').checked) {
                    requiredFields = requiredFields.concat(bankFields);
                }

                // Add application data fields if any are selected
                const selectedAppData = document.querySelectorAll('input[data-source-name]:checked');
                if (selectedAppData.length > 0) {
                    requiredFields = requiredFields.concat(appDataFields);
                }

                // Add performance metrics for custom model building
                requiredFields = requiredFields.concat(performanceFields);

                requiredFields.forEach(field => {
                    const labelEl = document.createElement('label');
                    labelEl.textContent = field.label;

                    const selectEl = document.createElement('select');
                    selectEl.id = `map-${field.key}`;
                    
                    const defaultOption = document.createElement('option');
                    defaultOption.value = "";
                    defaultOption.textContent = "Select a column...";
                    selectEl.appendChild(defaultOption);

                    let bestMatch = '';
                    // Simple auto-matching logic based on hints
                    for (const hint of field.hints) {
                        const match = csvColumns.find(col => col.toLowerCase().replace(/_/g, '').includes(hint));
                        if (match) {
                            bestMatch = match;
                            break;
                        }
                    }

                    csvColumns.forEach(col => {
                        const option = document.createElement('option');
                        option.value = col;
                        option.textContent = col;
                        if (col === bestMatch) {
                            option.selected = true;
                        }
                        selectEl.appendChild(option);
                    });
                    
                    mappingGrid.appendChild(labelEl);
                    mappingGrid.appendChild(selectEl);
                });

                showPage('mapping-page');
            }


            // --- OTHER LOGIC ---
            const includeBankCheckbox = document.getElementById('include-bank-statement');
            const bankFormatOptions = document.getElementById('bank-format-options');
            const accountAggregatorSection = document.getElementById('account-aggregator-section');
            const summDataRadio = document.getElementById('summ-data-radio');
            const txnDataRadio = document.getElementById('txn-data-radio');
            
            includeBankCheckbox.addEventListener('change', e => {
                const isChecked = e.target.checked;
                bankFormatOptions.style.display = isChecked ? 'block' : 'none';
                bankFormatOptions.querySelectorAll('input').forEach(input => input.disabled = !isChecked);
                
                // Reset subsequent sections when bank statement is unchecked
                if (!isChecked) {
                    accountAggregatorSection.style.display = 'none';
                }
            });

            // Show account aggregator section when either transaction or summarised data is selected
            [summDataRadio, txnDataRadio].forEach(radio => {
                radio.addEventListener('change', e => {
                    if (e.target.checked) {
                        accountAggregatorSection.style.display = 'block';
                    }
                });
            });

            document.querySelectorAll('[data-modal-target]').forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const targetId = trigger.getAttribute('data-modal-target');
                    document.getElementById(targetId).classList.add('active');
                    lucide.createIcons();
                });
            });
            document.querySelectorAll('.modal .close-modal').forEach(closeBtn => {
                closeBtn.addEventListener('click', () => closeBtn.closest('.modal').classList.remove('active'));
            });
            window.addEventListener('click', e => {
                if (e.target.classList.contains('modal')) e.target.classList.remove('active');
            });
            
            // Initial setup calls
            document.querySelector('input[name="asset_class"]:checked').dispatchEvent(new Event('change'));
            document.querySelector('input[name="bureau_setup"]:checked').dispatchEvent(new Event('change'));
            lucide.createIcons();

            // Custom Model Building Flow Event Listeners - Using Event Delegation
            document.getElementById('build-new-model-btn').addEventListener('click', () => showPage('target-selection-page'));
            document.getElementById('deploy-prebuilt-btn').addEventListener('click', () => {
                alert('Pre-built model deployed successfully! Redirecting to main application.');
                window.location.href = 'africa-index.html';
            });
            
            // Event delegation for custom model building buttons
            document.addEventListener('click', (e) => {
                // Target Selection Page Navigation
                if (e.target.id === 'target-dpd30') {
                    document.querySelectorAll('.target-option').forEach(opt => opt.classList.remove('selected'));
                    document.getElementById('target-dpd30').classList.add('selected');
                }
                if (e.target.id === 'target-dpd60') {
                    document.querySelectorAll('.target-option').forEach(opt => opt.classList.remove('selected'));
                    document.getElementById('target-dpd60').classList.add('selected');
                }
                if (e.target.id === 'target-dpd90') {
                    document.querySelectorAll('.target-option').forEach(opt => opt.classList.remove('selected'));
                    document.getElementById('target-dpd90').classList.add('selected');
                }
                
                // Proceed to Features Button
                if (e.target.id === 'proceed-to-features-btn') {
                    console.log('Proceed to features button clicked');
                    const selectedTarget = document.querySelector('input[name="target_variable"]:checked');
                    console.log('Selected target:', selectedTarget);
                    if (selectedTarget) {
                        console.log('Target selected, proceeding to feature exploration page');
                        showPage('feature-exploration-page');
                        // Simulate feature generation progress
                        simulateFeatureGeneration();
                    } else {
                        console.log('No target selected, showing alert');
                        alert('Please select a target variable (DPD 30, 60, or 90)');
                    }
                }
                
                // Feature Exploration Page Navigation
                if (e.target.id === 'proceed-to-algorithm-btn') {
                    showPage('algorithm-selection-page');
                }
                
                // Algorithm Selection Page Navigation
                if (e.target.id === 'proceed-to-rules-btn') {
                    showPage('rules-configuration-page');
                    setTimeout(initializeSliders, 100); // Initialize sliders after page is shown
                }
                
                // Rules Configuration Page Navigation
                if (e.target.id === 'proceed-to-final-btn') {
                    showPage('final-model-summary-page');
                }
                
                // Model Training Page Navigation
                if (e.target.id === 'proceed-to-custom-backtest-btn') {
                    showPage('custom-backtest-results-page');
                    // Simulate training completion
                    simulateTrainingCompletion();
                }
                
                // Final Model Summary Navigation
                if (e.target.id === 'back-to-rules-btn') {
                    showPage('rules-configuration-page');
                }
                if (e.target.id === 'finish-setup-btn') {
                    // Redirect to main application or show completion message
                    alert('Custom model setup complete! Model is ready for deployment.');
                    window.location.href = 'africa-index.html';
                }

                // Custom Backtest Results Page Navigation
                if (e.target.id === 'back-to-prebuilt-btn') {
                    showPage('backtest-results-page');
                }
                if (e.target.id === 'start-over-custom-btn') {
                    document.getElementById('model-config-form').reset();
                    document.querySelector('input[name="bureau_setup"][value="single"]').dispatchEvent(new Event('change'));
                    document.querySelector('input[name="asset_class"][value="MFI"]').dispatchEvent(new Event('change'));
                    document.getElementById('include-bank-statement').dispatchEvent(new Event('change'));
                    showPage('data-selection-page');
                }
                
                // Back button from target selection to backtest results
                if (e.target.id === 'back-to-backtest-btn') {
                    showPage('backtest-results-page');
                }
            });

            // Helper Functions for Custom Model Building Flow
            function simulateFeatureGeneration() {
                const statusItems = document.querySelectorAll('.feature-generation-status .status-item');
                let currentIndex = 0;
                
                const updateStatus = () => {
                    if (currentIndex < statusItems.length) {
                        const statusIcon = statusItems[currentIndex].querySelector('.status-icon');
                        if (statusIcon) {
                            statusIcon.classList.remove('processing');
                            statusIcon.classList.add('completed');
                        }
                        currentIndex++;
                        if (currentIndex < statusItems.length) {
                            setTimeout(updateStatus, 1000);
                        }
                    }
                };
                
                if (statusItems.length > 0) {
                    updateStatus();
                }
            }

        });

        // Global function for generating decision tree
        function generateDecisionTree() {
            const selectedVariables = Array.from(document.querySelectorAll('input[name="rule_variables"]:checked')).map(cb => cb.value);
            
            // Get threshold values with fallbacks
            const kiScoreThreshold = document.getElementById('ki-score-threshold')?.value || '650';
            const ltvThreshold = document.getElementById('ltv-threshold')?.value || '85';
            const ageThreshold = document.getElementById('age-threshold')?.value || '21';
            const foirThreshold = document.getElementById('foir-threshold')?.value || '60';
            const minIncomeThreshold = document.getElementById('min_income-threshold')?.value || '25000';
            const dpd30Threshold = document.getElementById('dpd_30-threshold')?.value || '0';
            const dpd90Threshold = document.getElementById('dpd_90-threshold')?.value || '0';
            const openLoansThreshold = document.getElementById('open_loans-threshold')?.value || '3';
            const creditEnquiriesThreshold = document.getElementById('credit_enquiries-threshold')?.value || '5';

            // Calculate dynamic rates based on cutoff values
            let baseApprovalRate = 85;
            let baseDefaultRate = 2.5;

            let treeHTML = '<div class="decision-tree-container">';
            treeHTML += '<div class="tree-flow">';

            selectedVariables.forEach((variable, index) => {
                // Calculate rates based on the specific cutoff value and variable type
                let currentApprovalRate, currentDefaultRate;
                
                switch(variable) {
                    case 'ki_score':
                        // Higher FOIR threshold = stricter = lower approval, lower default
                        const kiScoreNum = parseFloat(kiScoreThreshold);
                        currentApprovalRate = Math.max(60, baseApprovalRate - (kiScoreNum - 650) * 0.1);
                        currentDefaultRate = Math.max(0.5, baseDefaultRate - (kiScoreNum - 650) * 0.02);
                        break;
                    case 'ltv':
                        // Lower LTV threshold = stricter = lower approval, lower default
                        const ltvNum = parseFloat(ltvThreshold);
                        currentApprovalRate = Math.max(65, baseApprovalRate - (85 - ltvNum) * 0.8);
                        currentDefaultRate = Math.max(0.8, baseDefaultRate - (85 - ltvNum) * 0.15);
                        break;
                    case 'foir':
                        // Lower FOIR threshold = stricter = lower approval, lower default
                        const foirNum = parseFloat(foirThreshold);
                        currentApprovalRate = Math.max(70, baseApprovalRate - (60 - foirNum) * 0.5);
                        currentDefaultRate = Math.max(1.0, baseDefaultRate - (60 - foirNum) * 0.1);
                        break;
                    case 'min_income':
                        // Higher income threshold = stricter = lower approval, lower default
                        const incomeNum = parseFloat(minIncomeThreshold);
                        currentApprovalRate = Math.max(55, baseApprovalRate - (incomeNum - 25000) * 0.0003);
                        currentDefaultRate = Math.max(0.3, baseDefaultRate - (incomeNum - 25000) * 0.00005);
                        break;
                    case 'dpd_30':
                        // Lower DPD threshold = stricter = lower approval, lower default
                        const dpd30Num = parseFloat(dpd30Threshold);
                        currentApprovalRate = Math.max(75, baseApprovalRate - dpd30Num * 2);
                        currentDefaultRate = Math.max(0.5, baseDefaultRate - dpd30Num * 0.3);
                        break;
                    case 'dpd_90':
                        // Lower DPD threshold = stricter = lower approval, lower default
                        const dpd90Num = parseFloat(dpd90Threshold);
                        currentApprovalRate = Math.max(70, baseApprovalRate - dpd90Num * 1.5);
                        currentDefaultRate = Math.max(0.8, baseDefaultRate - dpd90Num * 0.2);
                        break;
                    case 'open_loans':
                        // Lower open loans threshold = stricter = lower approval, lower default
                        const openLoansNum = parseFloat(openLoansThreshold);
                        currentApprovalRate = Math.max(60, baseApprovalRate - (3 - openLoansNum) * 5);
                        currentDefaultRate = Math.max(0.5, baseDefaultRate - (3 - openLoansNum) * 0.8);
                        break;
                    case 'credit_enquiries':
                        // Lower enquiries threshold = stricter = lower approval, lower default
                        const enquiriesNum = parseFloat(creditEnquiriesThreshold);
                        currentApprovalRate = Math.max(65, baseApprovalRate - (5 - enquiriesNum) * 3);
                        currentDefaultRate = Math.max(0.6, baseDefaultRate - (5 - enquiriesNum) * 0.4);
                        break;
                    default:
                        currentApprovalRate = baseApprovalRate - (index * 3);
                        currentDefaultRate = baseDefaultRate - (index * 0.4);
                }
                
                let condition = '';
                
                switch(variable) {
                    case 'ki_score':
                        condition = `FOIR > ${foirThreshold}`;
                        break;
                    case 'ltv':
                        condition = `LTV Ratio < ${ltvThreshold}%`;
                        break;
                    case 'foir':
                        condition = `FOIR < ${foirThreshold}%`;
                        break;
                    case 'min_income':
                        condition = `Min Income > ${minIncomeThreshold} `;
                        break;
                    case 'dpd_30':
                        condition = `Current DPD 30+ < ${dpd30Threshold}`;
                        break;
                    case 'dpd_90':
                        condition = `DPD Last 6 Months 90+ < ${dpd90Threshold}`;
                        break;
                    case 'open_loans':
                        condition = `No. of Open Loans < ${openLoansThreshold}`;
                        break;
                    case 'credit_enquiries':
                        condition = `Credit Enquiries (Last 6 Months) < ${creditEnquiriesThreshold}`;
                        break;
                    default:
                        condition = `${variable} < threshold`;
                }

                treeHTML += `
                    <div class="tree-node rule-node">
                        <div class="node-content">
                            <div class="rule-condition">${condition}</div>
                            <div class="node-rates">
                                <span class="approval-rate">${currentApprovalRate.toFixed(1)}% Appr.</span>
                                <span class="default-rate"> ${currentDefaultRate.toFixed(1)}% Def.</span>
                            </div>
                        </div>
                    </div>
                `;

                // Add arrow connector if not the last node
                if (index < selectedVariables.length - 1) {
                    treeHTML += '<div class="tree-arrow"><i data-lucide="arrow-right"></i></div>';
                }
            });

            // Calculate final rates based on the most restrictive rule
            let finalApprovalRate = baseApprovalRate;
            let finalDefaultRate = baseDefaultRate;
            
            // Apply the most restrictive rule's impact
            selectedVariables.forEach((variable, index) => {
                const kiScoreNum = parseFloat(kiScoreThreshold);
                const ltvNum = parseFloat(ltvThreshold);
                const foirNum = parseFloat(foirThreshold);
                const incomeNum = parseFloat(minIncomeThreshold);
                const dpd30Num = parseFloat(dpd30Threshold);
                const dpd90Num = parseFloat(dpd90Threshold);
                const openLoansNum = parseFloat(openLoansThreshold);
                const enquiriesNum = parseFloat(creditEnquiriesThreshold);
                
                // Apply cumulative effects of all rules
                finalApprovalRate -= (kiScoreNum - 650) * 0.05;
                finalApprovalRate -= (85 - ltvNum) * 0.4;
                finalApprovalRate -= (60 - foirNum) * 0.25;
                finalApprovalRate -= (incomeNum - 25000) * 0.00015;
                finalApprovalRate -= dpd30Num * 1;
                finalApprovalRate -= dpd90Num * 0.75;
                finalApprovalRate -= (3 - openLoansNum) * 2.5;
                finalApprovalRate -= (5 - enquiriesNum) * 1.5;
                
                finalDefaultRate -= (kiScoreNum - 650) * 0.01;
                finalDefaultRate -= (85 - ltvNum) * 0.075;
                finalDefaultRate -= (60 - foirNum) * 0.05;
                finalDefaultRate -= (incomeNum - 25000) * 0.000025;
                finalDefaultRate -= dpd30Num * 0.15;
                finalDefaultRate -= dpd90Num * 0.1;
                finalDefaultRate -= (3 - openLoansNum) * 0.4;
                finalDefaultRate -= (5 - enquiriesNum) * 0.2;
            });
            
            // Ensure rates are within reasonable bounds
            finalApprovalRate = Math.max(40, Math.min(85, finalApprovalRate));
            finalDefaultRate = Math.max(0.2, Math.min(5, finalDefaultRate));
            
            treeHTML += `
                <div class="tree-node approve-node">
                    <div class="node-content">
                        <div class="rule-condition">APPROVE</div>
                        <div class="node-rates">
                            <span class="approval-rate">${finalApprovalRate.toFixed(1)}% Appr.</span>
                            <span class="default-rate"> ${finalDefaultRate.toFixed(1)}% Def.</span>
                        </div>
                    </div>
                </div>
            `;

            treeHTML += '</div></div>';

            const treeContainer = document.getElementById('decision-tree-container');
            if (treeContainer) {
                treeContainer.innerHTML = treeHTML;
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
            
            generateDynamicCutoffControls(selectedVariables);
            const cutoffSection = document.getElementById('cutoff-adjustment-section');
            if (cutoffSection) {
                cutoffSection.style.display = 'block';
            }
        }

        // Function to generate dynamic cutoff controls
        function generateDynamicCutoffControls(selectedVariables) {
            const controlsContainer = document.getElementById('dynamic-cutoff-controls');
            if (!controlsContainer) return;

            let controlsHTML = '';

            // Define variable configurations
            const variableConfigs = {
                ki_score: {
                    label: 'FOIR',
                    condition: '<',
                    min: 300,
                    max: 900,
                    step: 10,
                    defaultValue: 650,
                    unit: ''
                },
                ltv: {
                    label: 'LTV Ratio',
                    condition: '<',
                    min: 50,
                    max: 95,
                    step: 5,
                    defaultValue: 85,
                    unit: '%'
                },
                foir: {
                    label: 'FOIR (Fixed Obligation to Income Ratio)',
                    condition: '<',
                    min: 10,
                    max: 200,
                    step: 10,
                    defaultValue: 60,
                    unit: '%'
                },
                min_income: {
                    label: 'Minimum Income',
                    condition: '>',
                    min: 10000,
                    max: 100000,
                    step: 1000,
                    defaultValue: 25000,
                    unit: ''
                },
                current_dpd_30: {
                    label: 'Current DPD 30+',
                    condition: '<',
                    min: 0,
                    max: 12,
                    step: 1,
                    defaultValue: 0,
                    unit: ''
                },
                dpd_6months_90: {
                    label: 'DPD Last 6 Months 90+',
                    condition: '<',
                    min: 0,
                    max: 6,
                    step: 1,
                    defaultValue: 0,
                    unit: ''
                },
                open_loans: {
                    label: 'Number of Open Loans',
                    condition: '<',
                    min: 0,
                    max: 10,
                    step: 1,
                    defaultValue: 3,
                    unit: ''
                },
                credit_enquiries: {
                    label: 'Credit Enquiries (Last 6 Months)',
                    condition: '<',
                    min: 0,
                    max: 20,
                    step: 1,
                    defaultValue: 3,
                    unit: ''
                }
            };

            // Generate controls for each selected variable
            selectedVariables.forEach((variable, index) => {
                const config = variableConfigs[variable];
                if (!config) return;

                const currentValue = document.getElementById(`${variable}-threshold`)?.value || config.defaultValue;
                const sliderId = `${variable}-slider`;
                const displayId = `${variable}-display`;

                controlsHTML += `
                    <div class="cutoff-item">
                        <label for="${sliderId}">${config.label} ${config.condition} Threshold:</label>
                        <input type="range" id="${sliderId}" 
                               min="${config.min}" max="${config.max}" 
                               value="${currentValue}" step="${config.step}" 
                               class="cutoff-slider" 
                               data-variable="${variable}"
                               data-condition="${config.condition}">
                        <span class="cutoff-value" id="${displayId}">${currentValue}${config.unit}</span>
                    </div>
                `;
            });

            controlsContainer.innerHTML = controlsHTML;

            // Initialize sliders for the new controls
            initializeDynamicSliders();
        }

        // Initialize dynamic sliders
        function initializeDynamicSliders() {
            const sliders = document.querySelectorAll('.cutoff-slider');
            
            sliders.forEach(slider => {
                const variable = slider.dataset.variable;
                const condition = slider.dataset.condition;
                const displayId = `${variable}-display`;
                const display = document.getElementById(displayId);
                
                if (display) {
                    // Get the unit from the variable config
                    const units = {
                        ki_score: '',
                        ltv: '%',
                        foir: '%',
                        min_income: '',
                        current_dpd_30: '',
                        dpd_6months_90: '',
                        open_loans: '',
                        credit_enquiries: ''
                    };
                    
                    const unit = units[variable] || '';
                    
                    slider.addEventListener('input', function() {
                        display.textContent = this.value + unit;
                    });
                }
            });
        }

        // Function to regenerate decision tree with new cutoffs
        function regenerateDecisionTree() {
            // Get all dynamic sliders
            const sliders = document.querySelectorAll('.cutoff-slider');
            
            // Update threshold inputs with slider values
            sliders.forEach(slider => {
                const variable = slider.dataset.variable;
                const thresholdInput = document.getElementById(`${variable}-threshold`);
                
                if (thresholdInput) {
                    thresholdInput.value = slider.value;
                }
            });
            
            // Generate new tree
            generateDecisionTree();
        }

        // Initialize slider functionality
        function initializeSliders() {
            // This function is now replaced by initializeDynamicSliders()
            // Keeping for backward compatibility
            initializeDynamicSliders();
        }

        function simulateTrainingCompletion() {
            const progressBar = document.querySelector('.progress-fill');
            const trainingSteps = document.querySelectorAll('.training-step');
            let currentStep = 0;
            
            const updateProgress = () => {
                if (currentStep < trainingSteps.length) {
                    trainingSteps[currentStep].classList.remove('pending');
                    trainingSteps[currentStep].classList.add('completed');
                    const progress = ((currentStep + 1) / trainingSteps.length) * 100;
                    progressBar.style.width = progress + '%';
                    currentStep++;
                    setTimeout(updateProgress, 800);
                }
            };
            
            updateProgress();
        }
    </script>
</body>
</html>

